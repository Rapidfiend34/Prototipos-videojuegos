00002860 Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 16/01/2023 22:27:54

00000000                             1  ; ==============================================================================
00000000                             2  ; TITLE       : MARCIANOS 68K
00000000                             3  ; DESCRIPTION : New version of the classic Space Invaders
00000000                             4  ; AUTHOR      : Aarón Fernández Ramón y Tomás Dengra Femenia
00000000                             5  ; HISTORY     :
00000000                             6  ; ==============================================================================
00000000                             7  
00001000                             8              ORG     $1000
00001000                             9              
00001000                            10              INCLUDE "CONST.X68"
00001000                            11  ; ==============================================================================
00001000                            12  ; GAME CONSTANTS
00001000                            13  ; ==============================================================================
00001000                            14  
00001000                            15  ; --- SHOOT RELATED CONTANTS ---------------------------------------------------
00001000                            16  
00001000  =AA000000                 17  SHOTPCOL    EQU     $AA000000               ; SHOOT CONTOUR COLOR
00001000  =FF000000                 18  SHOTFCOL    EQU     $FF000000               ; SHOOT FILL COLOR
00001000  =00000008                 19  SHOTRAD     EQU     8                       ; SHOOT BALL'S RADIUS
00001000  =0000000F                 20  SHOTSPED    EQU     15                      ; SHOOT SPEED
00001000  =00000010                 21  SHOTWAIT    EQU     $10                     ; HELPS TO MODERATE SHOOT MOVEMENT
00001000                            22  
00001000                            23  ; --- SHIP RELATED CONSTANTS ---------------------------------------------------
00001000                            24  
00001000  =00000005                 25  SHTMAWIT    EQU     5                       ; MARCIANOS SHOOT RECTANGLE'S WIDTH
00001000  =0000000A                 26  SHTMAHEI    EQU     10                      ; MARCIANOS SHOOT RECTANGLE'S WIDTH
00001000                            27  
00001000                            28  ; --- BUTTON RELATED CONSTANTS -------------------------------------------------
00001000  =000000CD                 29  BUTPOSY1    EQU     205                     ; POSITION BUTTON 1 (START)
00001000  =00000118                 30  BUTPOSY2    EQU     280                     ; POSITION BUTTON 2 (INSTRUCCIONS)
00001000  =00000163                 31  BUTPOSY3    EQU     355                     ; POSITION BUTTON 3 (EXIT)
00001000  =0000007D                 32  BUTWIDTH    EQU     125                     ; WIDTH OF ALL THE BUTTONS
00001000  =00000032                 33  BUTHEIGH    EQU     50                      ; HEIGHT OF ALL THE BUTTONS
00001000                            34  
00001000                            35  ; --- SHIP RELATED CONSTANTS ---------------------------------------------------
00001000                            36  
00001000  =00000010                 37  SHIPWIDT    EQU     16                      ; SHIP WIDTH
00001000  =00000040                 38  SHIPHEIG    EQU     64                      ; SHIP HEIGHT
00001000  =0000000A                 39  SHIPSPED    EQU     10                      ; MAGNITUDE OF THE Y DISPLACEMENT
00001000  =0000FF00                 40  SHIPPCOL    EQU     $0000FF00               ; SHIP CONTOUR COLOR
00001000  =0000AA00                 41  SHIPFCOL    EQU     $0000AA00               ; SHIP FILL COLOR
00001000                            42  
00001000  =00FF0000                 43  NUCPCOL     EQU     $00FF0000               ; CENTRAL SHIP'S PART CONTOUR COLOR
00001000  =00FF0000                 44  NUCFCOL     EQU     $00FF0000               ; CENTRAL SHIP'S PART FILL COLOR
00001000  =00FFFF00                 45  MOTPCOL     EQU     $00FFFF00               ; SHIP'S MOTORS CONTOUR COLOR
00001000  =00FFFF00                 46  MOTFCOL     EQU     $00FFFF00               ; SHIP'S MOTORS FILL COLOR
00001000                            47  
00001000                            48  ; --- MARCIANO RELATED CONSTANTS -----------------------------------------------
00001000                            49  
00001000  =0000002E                 50  MARWIDTH    EQU     46                      ; MARCIANO'S WIDTH
00001000  =0000002E                 51  MARHEIGH    EQU     46                      ; MARCIANO'S HEIGHT
00001000  =00000001                 52  MARSPEDY    EQU     1                       ; MARCIANO'S SPEED
00001000                            53  
00001000  =001111FF                 54  MCIRPCOL    EQU     $001111FF               ; CENTRAL MARCIANO'S CONTOUR COLOR
00001000  =000000AA                 55  MCIRFCOL    EQU     $000000AA               ; CENTRAL MARCIANO'S FILL COLOR
00001000  =00800080                 56  MRECPCOL    EQU     $00800080               ; MARCIANO'S MOTORS CONTOUR COLOR
00001000  =00800080                 57  MRECFCOL    EQU     $00800080               ; MARCIANO'S MOTORS FILL COLOR
00001000                            58  
00001000                            59  ; --- MARGUIDE RELATED CONSTANTS -----------------------------------------------
00001000                            60  
00001000  =00000030                 61  GUIWIDTH    EQU     48                      ; MARGUIDE'S WIDTH
00001000  =00000030                 62  GUIHEIGH    EQU     48                      ; MARGUIDE'S HEIGHT
00001000  =00000002                 63  GUISPEED    EQU     2                       ; MARGUIDE'S SPEED
00001000                            64  
00001000  =00000080                 65  GCIRPCOL    EQU     $00000080               ; CENTRAL MARGUIDE'S CONTOUR COLOR
00001000  =00000080                 66  GCIRFCOL    EQU     $00000080               ; CENTRAL MARGUIDE'S FILL COLOR
00001000  =0080FFFF                 67  GRECPCOL    EQU     $0080FFFF               ; MARGUIDE'S MOTORS CONTOUR COLOR
00001000  =0080FFFF                 68  GRECFCOL    EQU     $0080FFFF               ; MARGUIDE'S MOTORS FILL COLOR
00001000                            69  
00001000                            70  ; --- SCOREBOARD RELATED CONSTANTS ---------------------------------------------
00001000                            71  
00001000  =00000000                 72  SCOFCOL     EQU     $00000000               ; TEXT BACKGROUND COLOR
00001000  =00004201                 73  SCOLINE1    EQU     $4201                   ; FIRST TEXT LINE COORDINATES
00001000  =00004202                 74  SCOLINE2    EQU     $4202                   ; SECOND TEXT LINE COORDINATES
00001000  =00000101                 75  SCOLINE3    EQU     $0101                   ; THIRD  TEXT LINE COORDINATES
00001000  =00000032                 76  POINTS      EQU     50                      ; POINTS FOR EACH MARCIANO KILLED
00001000                            77  
00001000                            78  ; --- STATE RELATED CONSTANTS --------------------------------------------------
00001000                            79  
00001000  =FFFFFFFF                 80  STANONE     EQU     -1                      ; NON-EXISTENT STATE NUMBER
00001000  =000001F4                 81  ISCMAXTM    EQU     500                     ; INTRO SCREEN WATING CYCLES
00001000  =000003E8                 82  INSMAXTM    EQU     1000
00001000                            83  
00001000                            84  -------------------- end include --------------------
00001000                            85              INCLUDE "SYSCONST.X68"
00001000                            86  ; ==============================================================================
00001000                            87  ; SYSTEM CONSTANTS
00001000                            88  ; ==============================================================================
00001000                            89  
00001000                            90  ; --- SCREEN RELATED CONSTANTS -------------------------------------------------
00001000                            91  
00001000  =00000280                 92  SCRWIDTH    EQU     640                    ; SCREEN WIDTH
00001000  =00000280                 93  SCRHEIGH    EQU     640                    ; SCREEN HEIGHT
00001000                            94  
00001000                            95  ; --- KEYCODES -----------------------------------------------------------------
00001000                            96  
00001000  =00000025                 97  KBDLEFT     EQU     $25
00001000  =00000026                 98  KBDUP       EQU     $26
00001000  =00000027                 99  KBDRIGHT    EQU     $27
00001000  =00000028                100  KBDDOWN     EQU     $28
00001000  =00000058                101  KBDFIRE1    EQU     'X'
00001000  =00000020                102  KBDFIRE2    EQU     ' '
00001000  =00000010                103  KBDFIRE3    EQU     $10
00001000  =00000050                104  KBDPAUSE    EQU     'P'
00001000                           105  
00001000                           106  ; --- FRAMES PER SECOND (FPS) --------------------------------------------------
00001000  =00000032                107  SCRFPS      EQU     50                      ; DEFINES THE MAXIMUM FPS
00001000  =00000001                108  SCRINTN     EQU     1   
00001000  =00000002                109  FPSINTNM    EQU     2                       ; FRAMES UPDATE TRAP NUMBER 
00001000                           110  
00001000                           111  ; --- TRAP NUMBERS -------------------------------------------------------------
00001000                           112  
00001000  =00000000                113  SCRUPTN     EQU     0                       ; SCREEN UPDATE TRAP NUMBER
00001000  =00000001                114  KBDUPTN     EQU     1                       ; KEYBOARD UPDATE TRAP NUMBER
00001000  =00000002                115  SNDPLTN     EQU     2                       ; SOUND PLAY TRAP NUMBER
00001000                           116  
00001000                           117  -------------------- end include --------------------
00001000                           118              INCLUDE "LIB/DMMCONST.X68"
00001000                           119  ; =============================================================================
00001000                           120  ; DYNAMIC MEMORY MANAGEMENT CONSTANTS (SYSTEM CONSTANTS)
00001000                           121  ; =============================================================================
00001000                           122  
00001000  =00000040                123  DMMBSIZE    EQU     64                      ; BLOCK SIZE (BYTES). POWER OF TWO
00001000  =00000032                124  DMMBNUM     EQU     50                      ; NUMBER OF BLOCKS
00001000  =00000000                125  DMMSYSID    EQU     0                       ; SYSTEM OWNER ID (MUST BE 0)
00001000  =00000000                126  -------------------- end include --------------------
00001000                           127              INCLUDE "LIB/UTLCONST.X68"
00001000                           128  ; ==============================================================================
00001000                           129  ; UTIL CONSTANTS
00001000                           130  ; ==============================================================================
00001000                           131  
00001000  =00000008                132  UTLCHRWD    EQU     8                       ; CHARACTER WIDTH IN PIXELS
00001000  =00000008                133  -------------------- end include --------------------
00001000                           134              INCLUDE "LIB/DMMCODE.X68"
00001000                           135  ; =============================================================================
00001000                           136  ; DYNAMIC MEMORY MANAGEMENT (SYSTEM CODE)
00001000                           137  ; DYNAMIC MEMORY IS A SET OF DMMBNUM SLOTS OF DMMB SIZE BYTES EACH ONE.
00001000                           138  ; DMMBSIZE MUST BE POWER OF TWO. A SLOT HAS:
00001000                           139  ; - HEADER - 1 WORD. SPECIFIES THE OWNER (0 MEANS OWNED BY SYSTEM)
00001000                           140  ; - DATA   - DMMBSIZE - 2 BYTES. MAY CONTAIN VARS AND ANY KIND OF DATA RELATED
00001000                           141  ;            THE THE OWNER. IF OWNER==0, DATA IS MEANINGLESS.
00001000                           142  ; =============================================================================
00001000                           143  
00001000                           144  ; -----------------------------------------------------------------------------
00001000                           145  DMMINIT
00001000                           146  ; INITIALIZES THE DYNAMIC MEMORY TO ALL OWNED BY SYSTEM.
00001000                           147  ; INPUT    - NONE
00001000                           148  ; OUTPUT   - NONE
00001000                           149  ; MODIFIES - NONE
00001000                           150  ; -----------------------------------------------------------------------------
00001000  48E7 8080                151              MOVEM.L D0/A0,-(A7)
00001004  41F9 00002900            152              LEA     DMMDATA,A0
0000100A  303C 0031                153              MOVE.W  #DMMBNUM-1,D0
0000100E  30BC 0000                154  .LOOP       MOVE.W  #DMMSYSID,(A0)
00001012  D1FC 00000040            155              ADD.L   #DMMBSIZE,A0
00001018  51C8 FFF4                156              DBRA.W  D0,.LOOP
0000101C  4CDF 0101                157              MOVEM.L (A7)+,D0/A0
00001020  4E75                     158              RTS
00001022                           159  
00001022                           160  ; -----------------------------------------------------------------------------
00001022                           161  DMMFIRST
00001022                           162  ; SEARCHES THE FIRST MEMORY SLOT NOT OWNED BY SYSTEM AND OUTPUTS A POINTER
00001022                           163  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
00001022                           164  ; INPUT    - NONE
00001022                           165  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
00001022                           166  ; MODIFIES - NONE (ASIDE OF OUTPUT)
00001022                           167  ; -----------------------------------------------------------------------------
00001022  41F9 00002900            168              LEA     DMMDATA,A0
00001028  4A58                     169  DMMFRLOP    TST.W   (A0)+
0000102A  6600 0016                170              BNE     DMMFRFND
0000102E  D1FC 0000003E            171              ADD.L   #DMMBSIZE-2,A0
00001034  B1FC 0000357F            172  DMMFRCOM    CMP.L   #DMMDATA+DMMBSIZE*DMMBNUM-1,A0
0000103A  6DEC                     173              BLT     DMMFRLOP
0000103C  207C 00000000            174              MOVE.L  #0,A0
00001042  4E75                     175  DMMFRFND    RTS
00001044                           176  
00001044                           177  ; -----------------------------------------------------------------------------
00001044                           178  DMMNEXT
00001044                           179  ; SEARCHES THE NEXT MEMORY SLOT NOT OWNED BY SYSTEM AND OUTPUTS A POINTER
00001044                           180  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
00001044                           181  ; INPUT    - A0   : POINTER WITHIN THE CURRENT SLOT
00001044                           182  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
00001044                           183  ; MODIFIES - NONE (ASIDE OF OUTPUT)
00001044                           184  ; -----------------------------------------------------------------------------
00001044  2F00                     185              MOVE.L  D0,-(A7)
00001046  2008                     186              MOVE.L  A0,D0
00001048  C0BC FFFFFFC0            187              AND.L   #-DMMBSIZE,D0           ; TAKE ADVANTAGE OF ALIGNMENT
0000104E  0680 00000040            188              ADD.L   #DMMBSIZE,D0
00001054  2040                     189              MOVE.L  D0,A0
00001056  201F                     190              MOVE.L  (A7)+,D0
00001058  60DA                     191              BRA     DMMFRCOM
0000105A                           192  
0000105A                           193  ; -----------------------------------------------------------------------------
0000105A                           194  DMMFRSTO
0000105A                           195  ; SEARCHES THE FIRST MEMORY SLOT WITH THE SPECIFIED ID AND OUTPUTS A POINTER
0000105A                           196  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
0000105A                           197  ; INPUT    - D0.W : ID TO SEARCH
0000105A                           198  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
0000105A                           199  ; MODIFIES - NONE (ASIDE OF OUTPUT)
0000105A                           200  ; -----------------------------------------------------------------------------
0000105A  41F9 00002900            201              LEA     DMMDATA,A0
00001060  B058                     202  DMMFLOOP    CMP.W   (A0)+,D0
00001062  6700 0016                203              BEQ     DMMFFND
00001066  D1FC 0000003E            204              ADD.L   #DMMBSIZE-2,A0
0000106C  B1FC 0000357F            205  DMMFCOM     CMP.L   #DMMDATA+DMMBSIZE*DMMBNUM-1,A0
00001072  6DEC                     206              BLT     DMMFLOOP
00001074  207C 00000000            207              MOVE.L  #0,A0
0000107A  4E75                     208  DMMFFND     RTS
0000107C                           209  
0000107C                           210  ; -----------------------------------------------------------------------------
0000107C                           211  DMMNEXTO
0000107C                           212  ; SEARCHES THE NEXT MEMORY SLOT WITH THE SPECIFIED ID AND OUTPUTS A POINTER
0000107C                           213  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
0000107C                           214  ; INPUT    - D0.W : ID TO SEARCH
0000107C                           215  ;            A0   : POINTER WITHIN THE CURRENT SLOT
0000107C                           216  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
0000107C                           217  ; MODIFIES - NONE (ASIDE OF OUTPUT)
0000107C                           218  ; -----------------------------------------------------------------------------
0000107C  2F00                     219              MOVE.L  D0,-(A7)
0000107E  2008                     220              MOVE.L  A0,D0
00001080  C0BC FFFFFFC0            221              AND.L   #-DMMBSIZE,D0           ; TAKE ADVANTAGE OF ALIGNMENT
00001086  0680 00000040            222              ADD.L   #DMMBSIZE,D0
0000108C  2040                     223              MOVE.L  D0,A0
0000108E  201F                     224              MOVE.L  (A7)+,D0
00001090  60DA                     225              BRA     DMMFCOM
00001092                           226  
00001092                           227  ; -----------------------------------------------------------------------------
00001092                           228  DMMALLOC
00001092                           229  ; SEARCHES THE FIRST FREE (SYS OWNED) SLOT, ASSIGNS TO THE SPECIFIED OWNER
00001092                           230  ; AND RETURNS A POINTER TO THE CORRESPONDING DATA (SLOT ADDRESS + 2)
00001092                           231  ; INPUT    - D0.W : ID TO ASSIGN
00001092                           232  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FREE SPACE
00001092                           233  ; MODIFIES - NONE (ASIDE OF OUTPUT)
00001092                           234  ; -----------------------------------------------------------------------------
00001092  3F00                     235              MOVE.W  D0,-(A7)
00001094  4240                     236              CLR.W   D0
00001096  4EB8 105A                237              JSR     DMMFRSTO
0000109A  301F                     238              MOVE.W  (A7)+,D0
0000109C  B1FC 00000000            239              CMP.L   #0,A0
000010A2  6700 0006                240              BEQ     .END
000010A6  3140 FFFE                241              MOVE.W  D0,-2(A0)
000010AA  4E75                     242  .END        RTS
000010AC                           243  
000010AC                           244  ; -----------------------------------------------------------------------------
000010AC                           245  DMMFREE
000010AC                           246  ; FREES THE SLOT TO WHICH THE PROVIDED POINTER BELONGS BY SETTING ITS OWNED TO
000010AC                           247  ; SYSTEM (0)
000010AC                           248  ; INPUT    - A0   : POINTER BELONGING TO THE SLOT TO FREE
000010AC                           249  ; OUTPUT   - NONE
000010AC                           250  ; MODIFIES - NONE
000010AC                           251  ; -----------------------------------------------------------------------------
000010AC  48E7 8080                252              MOVEM.L D0/A0,-(A7)
000010B0  2008                     253              MOVE.L  A0,D0
000010B2  C0BC FFFFFFC0            254              AND.L   #-DMMBSIZE,D0           ; TAKE ADVANTAGE OF ALIGNMENT
000010B8  2040                     255              MOVE.L  D0,A0
000010BA  4250                     256              CLR.W   (A0)
000010BC  4CDF 0101                257              MOVEM.L (A7)+,D0/A0
000010C0  4E75                     258              RTS
000010C2                           259  
000010C2                           260  -------------------- end include --------------------
000010C2                           261              INCLUDE "SYSTEM.X68"
000010C2                           262  ; ==============================================================================
000010C2                           263  ; SYSTEM
000010C2                           264  ; ==============================================================================
000010C2                           265              
000010C2                           266  ; ------------------------------------------------------------------------------
000010C2                           267  SYSINIT
000010C2                           268  ; INITIALIZE SYSTEM.
000010C2                           269  ; INPUT    : NONE
000010C2                           270  ; OUTPUT   : NONE
000010C2                           271  ; MODIFIES : NONE
000010C2                           272  ; ------------------------------------------------------------------------------
000010C2  21FC 000011D6 0080       273              MOVE.L  #SCRPLOT,($80)
000010CA  21FC 0000123E 0084       274              MOVE.L  #KBDUPD,($84)
000010D2  21FC 0000115E 0088       275              MOVE.L  #SNDPLAY,($88)
000010DA  21FC 0000120A 0064       276              MOVE.L  #SCRTIM,($60+SCRINTN*4)
000010E2                           277  
000010E2  4EB9 00001170            278              JSR     SCRINIT
000010E8  4EB9 00001230            279              JSR     KBDINIT
000010EE  4EB9 00001100            280              JSR     SNDINIT
000010F4  4EB8 1000                281              JSR     DMMINIT
000010F8                           282                         
000010F8  40E7                     283              MOVE.W  SR,-(A7)
000010FA  0257 D8FF                284              ANDI.W  #$D8FF,(A7)
000010FE  4E73                     285              RTE
00001100                           286              
00001100                           287  ; ------------------------------------------------------------------------------
00001100                           288  SNDINIT
00001100                           289  ; SOUND SYSTEM INIT
00001100                           290  ; INPUT    : NONE
00001100                           291  ; OUTPUT   : NONE
00001100                           292  ; MODIFIES : NONE
00001100                           293  ; ------------------------------------------------------------------------------
00001100  48E7 C0C0                294              MOVEM.L D0-D1/A0-A1,-(A7)
00001104  4201                     295              CLR.B   D1
00001106  41F9 0000114E            296              LEA     .SNDLIST,A0
0000110C  2018                     297  .LOOP       MOVE.L  (A0)+,D0
0000110E  6700 000E                298              BEQ     .DONE
00001112  2240                     299              MOVE.L  D0,A1
00001114  103C 0047                300              MOVE.B  #71,D0
00001118  4E4F                     301              TRAP    #15
0000111A  5201                     302              ADDQ.B  #1,D1
0000111C  60EE                     303              BRA     .LOOP
0000111E  4CDF 0303                304  .DONE       MOVEM.L (A7)+,D0-D1/A0-A1
00001122  4E75                     305              RTS
00001124= 53 4E 44 2F 4D 41 ...    306  .SNDWALL    DC.B    'SND/MARHIT.wav',0
00001133= 53 4E 44 2F 48 49 ...    307  .SNDHIT     DC.B    'SND/HIT.wav',0
0000113F= 53 4E 44 2F 53 48 ...    308  .SNDSHOT    DC.B   'SND/SHOOT.wav',0
0000114E= 00001124 00001133 ...    309  .SNDLIST    DC.L    .SNDWALL,.SNDHIT,.SNDSHOT,0
0000115E                           310              
0000115E                           311  ; ------------------------------------------------------------------------------
0000115E                           312  SNDPLAY
0000115E                           313  ; PLAY SOUND
0000115E                           314  ; INPUT    : D7 SOUND ID
0000115E                           315  ; OUTPUT   : NONE
0000115E                           316  ; MODIFIES : NONE
0000115E                           317  ; ------------------------------------------------------------------------------
0000115E  48A7 C000                318              MOVEM.W D0-D1,-(A7)
00001162  103C 0048                319              MOVE.B  #72,D0
00001166  1207                     320              MOVE.B  D7,D1
00001168  4E4F                     321              TRAP    #15
0000116A  4C9F 0003                322              MOVEM.W (A7)+,D0-D1
0000116E  4E73                     323              RTE
00001170                           324  
00001170                           325  
00001170                           326  ; ------------------------------------------------------------------------------
00001170                           327  SCRINIT
00001170                           328  ; INIT SCREEN. SET SCREEN RESOLUTION, SET WINDOWED MODE, CLEAR SCREEN,
00001170                           329  ; ENABLE DOUBLE BUFFER.
00001170                           330  ; INPUT    : NONE
00001170                           331  ; OUTPUT   : NONE
00001170                           332  ; MODIFIES : NONE
00001170                           333  ; ------------------------------------------------------------------------------
00001170                           334  
00001170  48E7 C000                335              MOVEM.L D0-D1,-(A7)
00001174                           336  
00001174                           337              ; SET SCREEN RESOLUTION
00001174  103C 0021                338              MOVE.B  #33,D0
00001178  223C 02800280            339              MOVE.L  #SCRWIDTH<<16|SCRHEIGH,D1
0000117E  4E4F                     340              TRAP    #15
00001180                           341              
00001180                           342              ; SET WINDOWED MODE
00001180  7201                     343              MOVE.L  #1,D1
00001182  4E4F                     344              TRAP    #15
00001184                           345              
00001184                           346              ; CLEAR SCREEN
00001184  103C 000B                347              MOVE.B  #11,D0
00001188  323C FF00                348              MOVE.W  #$FF00,D1
0000118C  4E4F                     349              TRAP    #15
0000118E                           350              
0000118E                           351              ; ENABLE DOUBLE BUFFER
0000118E  103C 005C                352              MOVE.B  #92,D0
00001192  123C 0011                353              MOVE.B  #17,D1
00001196  4E4F                     354              TRAP    #15
00001198                           355              
00001198                           356             ; ENABLE TIMED INTERRUPT
00001198  103C 0020                357              MOVE.B  #32,D0
0000119C  123C 0006                358              MOVE.B  #6,D1
000011A0  143C 0081                359              MOVE.B  #$80|SCRINTN,D2
000011A4  7614                     360              MOVE.L  #1000/SCRFPS,D3
000011A6  4E4F                     361              TRAP    #15
000011A8                           362              
000011A8                           363  
000011A8                           364              ; CLEAR INTERRUPT COUNTER
000011A8  4239 000028EA            365              CLR.B   (SCRINTCT)
000011AE  4279 000028E6            366              CLR.W   (FRAMES)
000011B4  21FC 000011F0 0068       367              MOVE.L  #FPSISR,($60+FPSINTNM*4)
000011BC                           368              ; ENABLE TIMED INTERRUPT
000011BC  103C 0020                369              MOVE.B  #32,D0
000011C0  123C 0006                370              MOVE.B  #6,D1
000011C4  143C 0082                371              MOVE.B  #$80|FPSINTNM,D2
000011C8  263C 000003E8            372              MOVE.L  #1000,D3
000011CE  4E4F                     373              TRAP    #15
000011D0                           374  
000011D0                           375  
000011D0  4CDF 0003                376              MOVEM.L (A7)+,D0-D1
000011D4                           377              
000011D4  4E75                     378              RTS
000011D6                           379  
000011D6                           380  ; ------------------------------------------------------------------------------
000011D6                           381  SCRPLOT
000011D6                           382  ; UPDATES DOUBLE BUFFER
000011D6                           383  ; INPUT    : NONE
000011D6                           384  ; OUTPUT   : NONE
000011D6                           385  ; MODIFIES : NONE
000011D6                           386  ; ------------------------------------------------------------------------------
000011D6  48A7 C000                387              MOVEM.W D0-D1,-(A7)
000011DA                           388              ; SWITCH BUFFERS
000011DA  103C 005E                389              MOVE.B  #94,D0
000011DE  4E4F                     390              TRAP    #15
000011E0                           391              
000011E0                           392              ; CLEAR HIDDEN BUFFER
000011E0  103C 000B                393              MOVE.B  #11,D0
000011E4  323C FF00                394              MOVE.W  #$FF00,D1
000011E8  4E4F                     395              TRAP    #15
000011EA  4C9F 0003                396              MOVEM.W (A7)+,D0-D1
000011EE  4E73                     397              RTE
000011F0                           398  ; ------------------------------------------------------------------------------
000011F0                           399  FPSISR
000011F0                           400  ; TIMED INTERRUPT SERVICE ROUTINE
000011F0                           401  ; INPUT    : FPS, FRAMES
000011F0                           402  ; OUTPUT   : FPS
000011F0                           403  ; MODIFIES : NONE (ASIDE OF OUTPUT)
000011F0                           404  ; ------------------------------------------------------------------------------
000011F0  3039 000028E4            405              MOVE.W  (FPS),D0
000011F6  3039 000028E6            406              MOVE.W  (FRAMES),D0
000011FC  33C0 000028E4            407              MOVE.W  D0,(FPS)
00001202  4279 000028E6            408              CLR.W   (FRAMES)
00001208                           409  
00001208  4E73                     410              RTE
0000120A                           411  SCRTIM
0000120A                           412  ; TIMED INTERRUPT SERVICE ROUTINE
0000120A                           413  ; INPUT    : NONE
0000120A                           414  ; OUTPUT   : NONE
0000120A                           415  ; MODIFIES : NONE
0000120A                           416  ; ------------------------------------------------------------------------------
0000120A  5239 000028EA            417              ADDQ.B  #1,(SCRINTCT)
00001210  5279 000028E6            418              ADDQ.W  #1,(FRAMES)
00001216  5239 000028EC            419              ADDQ.B  #1,(SCRINTCY)
0000121C  5279 000028B0            420              ADDQ.W  #1,(SHOTIMER)
00001222  5279 000028BE            421              ADDQ.W  #1,(MARTIMER)
00001228  5279 000028C2            422              ADDQ.W  #1,(ROWTIMER)
0000122E                           423              
0000122E  4E73                     424              RTE
00001230                           425  
00001230                           426  
00001230                           427  ; ------------------------------------------------------------------------------
00001230                           428  KBDINIT
00001230                           429  ; INIT KEYBOARD
00001230                           430  ; INPUT    : NONE
00001230                           431  ; OUTPUT   : NONE
00001230                           432  ; MODIFIES : NONE
00001230                           433  ; ------------------------------------------------------------------------------
00001230  4239 000028E2            434              CLR.B   (KBDVAL)
00001236  4239 000028E3            435              CLR.B   (KBDEDGE)
0000123C  4E75                     436              RTS
0000123E                           437  
0000123E                           438  ; ------------------------------------------------------------------------------
0000123E                           439  KBDUPD
0000123E                           440  ; UPDATE KEYBOARD INFO.  
0000123E                           441  ; 7 -> PAUSE
0000123E                           442  ; 6 -> FIRE 3
0000123E                           443  ; 5 -> FIRE 2
0000123E                           444  ; 4 -> FIRE 1
0000123E                           445  ; 3 -> DOWN
0000123E                           446  ; 2 -> RIGHT
0000123E                           447  ; 1 -> UP
0000123E                           448  ; 0 -> LEFT
0000123E                           449  ; INPUT    : NONE
0000123E                           450  ; OUTPUT   : NONE
0000123E                           451  ; MODIFIES : NONE
0000123E                           452  ; ------------------------------------------------------------------------------
0000123E                           453  
0000123E  48E7 F000                454              MOVEM.L D0-D3,-(A7)
00001242                           455  
00001242                           456              ; READ FIRST PART
00001242  103C 0013                457              MOVE.B  #19,D0
00001246  223C 50102058            458              MOVE.L  #KBDPAUSE<<24|KBDFIRE3<<16|KBDFIRE2<<8|KBDFIRE1,D1
0000124C  4E4F                     459              TRAP    #15
0000124E                           460              
0000124E                           461              ; CONVERT TO DESIRED FORMAT
0000124E  4EB9 0000127E            462              JSR     .PACK
00001254                           463  
00001254                           464              ; READ SECOND PART
00001254  223C 28272625            465              MOVE.L  #KBDDOWN<<24|KBDRIGHT<<16|KBDUP<<8|KBDLEFT,D1
0000125A  4E4F                     466              TRAP    #15
0000125C                           467  
0000125C                           468              ; CONVERT TO DESIRED FORMAT
0000125C  4EB9 0000127E            469              JSR     .PACK
00001262                           470              
00001262                           471              ; COMPUTE KBDEDGE
00001262  1039 000028E2            472              MOVE.B  (KBDVAL),D0
00001268  4600                     473              NOT.B   D0
0000126A  C002                     474              AND.B   D2,D0
0000126C  13C0 000028E3            475              MOVE.B  D0,(KBDEDGE)
00001272                           476              
00001272                           477              ; STORE KBDVAL
00001272  13C2 000028E2            478              MOVE.B  D2,(KBDVAL)
00001278                           479              
00001278  4CDF 000F                480              MOVEM.L (A7)+,D0-D3
0000127C                           481  
0000127C  4E73                     482              RTE
0000127E                           483              
0000127E  363C 0003                484  .PACK       MOVE.W  #3,D3
00001282  E189                     485  .LOOP       LSL.L   #8,D1
00001284  E312                     486              ROXL.B  #1,D2
00001286  51CB FFFA                487              DBRA.W  D3,.LOOP
0000128A  4E75                     488              RTS
0000128C                           489  
0000128C                           490  -------------------- end include --------------------
0000128C                           491              INCLUDE "LIB/AGLCODE.X68"
0000128C                           492  ; =============================================================================
0000128C                           493  ; AGENT MANAGEMENT
0000128C                           494  ; EACH AGENT HAS A DATA BLOCK FROM DMM AS FOLLOWS:
0000128C                           495  ; +0 - LONG : UPDATE SUBROUTINE POINTER
0000128C                           496  ; +4 - LONG : PLOT SUBROUTINE POINTER
0000128C                           497  ; +8:END    : DATA (AGENT SPECIFIC)
0000128C                           498  ; =============================================================================
0000128C                           499  
0000128C                           500  ; -----------------------------------------------------------------------------
0000128C                           501  AGLADD
0000128C                           502  ; CREATES A NEW AGENT
0000128C                           503  ; INPUT    - A1 - POINTER TO AGENT INIT FUNCTION
0000128C                           504  ;            A2 - POINTER TO AGENT UPDATE FUNCTION
0000128C                           505  ;            A3 - POINTER TO AGENT PLOT FUNCTION
0000128C                           506  ;            D0 - AGENT TYPE (USED AS OWNER BY DMM)
0000128C                           507  ;            D1 - AGENT INITIALIZATION PARAMETER 1
0000128C                           508  ;            D2 - AGENT INITIALIZATION PARAMETER 2
0000128C                           509  ;            D3 - AGENT INITIALIZATION PARAMETER 3
0000128C                           510  ; OUTPUT   - NONE
0000128C                           511  ; MODIFIES - NONE
0000128C                           512  ; -----------------------------------------------------------------------------
0000128C  2F08                     513              MOVE.L  A0,-(A7)
0000128E  4EB8 1092                514              JSR     DMMALLOC
00001292  B1FC 00000000            515              CMP.L   #0,A0
00001298  6700 0008                516              BEQ     .END
0000129C  20CA                     517              MOVE.L  A2,(A0)+
0000129E  20CB                     518              MOVE.L  A3,(A0)+
000012A0  4E91                     519              JSR     (A1)
000012A2  205F                     520  .END        MOVE.L  (A7)+,A0
000012A4  4E75                     521              RTS
000012A6                           522  
000012A6                           523  ; -----------------------------------------------------------------------------
000012A6                           524  AGLUPD
000012A6                           525  ; UPDATES THE AGENT LIST. PRIOR TO CALLING THE UPDATE FUNCTIONS, A0 IS SET
000012A6                           526  ; TO THE DATA BLOCK OF THE CORRESPONDING SLOT.
000012A6                           527  ; INPUT    - NONE
000012A6                           528  ; OUTPUT   - NONE
000012A6                           529  ; MODIFIES - NONE
000012A6                           530  ; -----------------------------------------------------------------------------
000012A6  48E7 00C0                531              MOVEM.L A0-A1,-(A7)
000012AA  4EB8 1022                532              JSR     DMMFIRST
000012AE  B1FC 00000000            533  .LOOP       CMP.L   #0,A0
000012B4  6700 000E                534              BEQ     .END
000012B8  2250                     535              MOVE.L  (A0),A1
000012BA  5088                     536              ADD.L   #8,A0
000012BC  4E91                     537              JSR     (A1)
000012BE  4EB8 1044                538              JSR     DMMNEXT
000012C2  60EA                     539              BRA     .LOOP
000012C4  4CDF 0300                540  .END        MOVEM.L (A7)+,A0-A1
000012C8  4E75                     541              RTS
000012CA                           542  
000012CA                           543  ; -----------------------------------------------------------------------------
000012CA                           544  AGLPLOT
000012CA                           545  ; PLOTS THE AGENT LIST. PRIOR TO CALLING THE UPDATE FUNCTIONS, A0 IS SET
000012CA                           546  ; TO THE DATA BLOCK OF THE CORRESPONDING SLOT.
000012CA                           547  ; INPUT    - NONE
000012CA                           548  ; OUTPUT   - NONE
000012CA                           549  ; MODIFIES - NONE
000012CA                           550  ; -----------------------------------------------------------------------------
000012CA  48E7 00C0                551              MOVEM.L A0-A1,-(A7)
000012CE  4EB8 1022                552              JSR     DMMFIRST
000012D2  B1FC 00000000            553  .LOOP       CMP.L   #0,A0
000012D8  6700 0010                554              BEQ     .END
000012DC  2268 0004                555              MOVE.L  4(A0),A1
000012E0  5088                     556              ADD.L   #8,A0
000012E2  4E91                     557              JSR     (A1)
000012E4  4EB8 1044                558              JSR     DMMNEXT
000012E8  60E8                     559              BRA     .LOOP
000012EA  4CDF 0300                560  .END        MOVEM.L (A7)+,A0-A1
000012EE  4E75                     561              RTS
000012F0                           562  
000012F0                           563  ; -----------------------------------------------------------------------------
000012F0  =000010AC                564  AGLKILL     EQU     DMMFREE
000012F0                           565  ; KILLS THE AGENT BY RELEASING ITS MEMORY
000012F0                           566  ; INPUT    - A0 POINTER WITHIN THE AGENT MEMORY
000012F0                           567  ; OUTPUT   - NONE
000012F0                           568  ; MODIFIES - NONE
000012F0                           569  ; NOTE     - IT IS JUST A WRAPPER FOR DMMFREE
000012F0                           570  ; -----------------------------------------------------------------------------
000012F0                           571  
000012F0                           572  -------------------- end include --------------------
000012F0                           573              INCLUDE "LIB/UTLCODE.X68"
000012F0                           574  ; =============================================================================
000012F0                           575  ; UTILITY CODE
000012F0                           576  ; =============================================================================
000012F0                           577  
000012F0                           578  ; -----------------------------------------------------------------------------
000012F0                           579  UTLINIT
000012F0                           580  ; INITIALIZES UTILITY CODE
000012F0                           581  ; INPUT    - NONE
000012F0                           582  ; OUTPUT   - NONE
000012F0                           583  ; MODIFIES - NONE
000012F0                           584  ; -----------------------------------------------------------------------------
000012F0  48E7 C000                585              MOVEM.L D0-D1,-(A7)
000012F4  103C 0008                586              MOVE.B  #8,D0
000012F8  4E4F                     587              TRAP    #15
000012FA  13C1 000028E0            588              MOVE.B  D1,(UTLRNDIX)
00001300  4CDF 0003                589              MOVEM.L (A7)+,D0-D1
00001304  4E75                     590              RTS
00001306                           591  
00001306                           592  UTLPRINT
00001306                           593  ; PRINT SCREEN CENTERED TEXT
00001306                           594  ; INPUT    : A0 POINTER TO ZERO-TERMINATED STRING
00001306                           595  ;            D0.B SCREEN ROW TO PRINT TEXT
00001306                           596  ; OUTPUT   : D0.B NEXT ROW
00001306                           597  ; MODIFIES : NONE (ASIDE OF OUTPUT)
00001306                           598  ; -----------------------------------------------------------------------------
00001306  48E7 C0C0                599              MOVEM.L D0-D1/A0-A1,-(A7)
0000130A  4201                     600              CLR.B   D1
0000130C  2248                     601              MOVE.L  A0,A1
0000130E  4A18                     602  .LOOP       TST.B   (A0)+
00001310  6700 0006                603              BEQ     .ENDLOOP
00001314  5201                     604              ADDQ.B  #1,D1
00001316  60F6                     605              BRA     .LOOP
00001318  E209                     606  .ENDLOOP    LSR.B   #1,D1
0000131A                           607              
0000131A  0401 0028                608              SUB.B  #(SCRWIDTH/UTLCHRWD)/2,D1
0000131E                           609              
0000131E  4401                     610              NEG.B   D1
00001320  E141                     611              ASL.W   #8,D1
00001322  8240                     612              OR.W    D0,D1
00001324  103C 000B                613              MOVE.B  #11,D0
00001328  4E4F                     614              TRAP    #15
0000132A  103C 000D                615              MOVE.B  #13,D0
0000132E  4E4F                     616              TRAP    #15
00001330  4CDF 0303                617              MOVEM.L (A7)+,D0-D1/A0-A1
00001334  5200                     618              ADDQ.B  #1,D0
00001336  4E75                     619              RTS
00001338                           620              
00001338                           621  
00001338                           622  ; -----------------------------------------------------------------------------
00001338                           623  UTLRAND
00001338                           624  ; PROVIDES A PSEUDO-RANDOM BYTE
00001338                           625  ; INPUT    - NONE
00001338                           626  ; OUTPUT   - D0.L RANDOM VALUE (ONLY BYTE)
00001338                           627  ; MODIFIES - NONE (ASIDE OF OUTPUT)
00001338                           628  ; -----------------------------------------------------------------------------
00001338  2F08                     629              MOVE.L  A0,-(A7)
0000133A  41F9 00001356            630              LEA     .RANDVEC,A0
00001340  4280                     631              CLR.L   D0
00001342  1039 000028E0            632              MOVE.B  (UTLRNDIX),D0
00001348  1030 0800                633              MOVE.B  (A0,D0.L),D0
0000134C  5239 000028E0            634              ADDQ.B  #1,(UTLRNDIX)
00001352  205F                     635              MOVE.L  (A7)+,A0
00001354  4E75                     636              RTS
00001356                           637  
00001356                           638  
00001356= A2 EE 9A 0C F5 24 ...    639  .RANDVEC    DC.B    162, 238, 154, 12 , 245, 36 , 32 , 103
0000135E= 2A A3 51 26 E0 AC ...    640              DC.B    42 , 163, 81 , 38 , 224, 172, 19 , 69
00001366= 75 51 CA FD 33 EB ...    641              DC.B    117, 81 , 202, 253, 51 , 235, 108, 154
0000136E= 60 CC E7 B8 9A EB ...    642              DC.B    96 , 204, 231, 184, 154, 235, 34 , 203
00001376= 1D 76 B5 95 B0 89 ...    643              DC.B    29 , 118, 181, 149, 176, 137, 62 , 108
0000137E= 39 15 48 C9 6E CA ...    644              DC.B    57 , 21 , 72 , 201, 110, 202, 159, 41
00001386= 43 E7 E2 7C 37 25 ...    645              DC.B    67 , 231, 226, 124, 55 , 37 , 84 , 62
0000138E= E9 94 CE E9 E4 52 ...    646              DC.B    233, 148, 206, 233, 228, 82 , 243, 78
00001396= 37 6D 9A 84 A2 28 ...    647              DC.B    55 , 109, 154, 132, 162, 40 , 30 , 39
0000139E= 19 E2 C6 77 80 D4 ...    648              DC.B    25 , 226, 198, 119, 128, 212, 232, 225
000013A6= 0A 5A 32 67 33 C2 ...    649              DC.B    10 , 90 , 50 , 103, 51 , 194, 222, 40
000013AE= 59 80 DC 0E 57 FC ...    650              DC.B    89 , 128, 220, 14 , 87 , 252, 243, 252
000013B6= 8A AB BC F7 07 4D ...    651              DC.B    138, 171, 188, 247, 7  , 77 , 29 , 234
000013BE= EF D5 77 6E 1E BB ...    652              DC.B    239, 213, 119, 110, 30 , 187, 131, 23
000013C6= D6 E0 2A 8F BD 28 ...    653              DC.B    214, 224, 42 , 143, 189, 40 , 212, 130
000013CE= 13 4F 66 EC 0A 64 ...    654              DC.B    19 , 79 , 102, 236, 10 , 100, 122, 188
000013D6= 56 52 9A 16 9B 90 ...    655              DC.B    86 , 82 , 154, 22 , 155, 144, 7  , 199
000013DE= 06 8A A4 F7 01 DA ...    656              DC.B    6  , 138, 164, 247, 1  , 218, 166, 82
000013E6= F2 E7 77 28 B1 76 ...    657              DC.B    242, 231, 119, 40 , 177, 118, 220, 102
000013EE= A4 42 E3 81 B1 67 ...    658              DC.B    164, 66 , 227, 129, 177, 103, 165, 108
000013F6= BF CE FA 16 BF 38 ...    659              DC.B    191, 206, 250, 22 , 191, 56 , 30 , 161
000013FE= D1 8B 50 0C 5F 49 ...    660              DC.B    209, 139, 80 , 12 , 95 , 73 , 168, 56
00001406= DE 4C 14 A2 40 DC ...    661              DC.B    222, 76 , 20 , 162, 64 , 220, 93 , 12
0000140E= B6 9B 0A 38 5D AB ...    662              DC.B    182, 155, 10 , 56 , 93 , 171, 89 , 6
00001416= E2 1B DD 75 15 82 ...    663              DC.B    226, 27 , 221, 117, 21 , 130, 101, 18
0000141E= 8A 26 51 30 9F 47 ...    664              DC.B    138, 38 , 81 , 48 , 159, 71 , 57 , 21
00001426= 1E 8A BB 71 C6 6E ...    665              DC.B    30 , 138, 187, 113, 198, 110, 185, 152
0000142E= 9F 47 E5 34 94 27 ...    666              DC.B    159, 71 , 229, 52 , 148, 39 , 77 , 6
00001436= 7D 06 D6 BA 30 0F ...    667              DC.B    125, 6  , 214, 186, 48 , 15 , 212, 22
0000143E= EC 7F 7E 03 CF 2D ...    668              DC.B    236, 127, 126, 3  , 207, 45 , 193, 2
00001446= 94 5B 23 F2 8B CD ...    669              DC.B    148, 91 , 35 , 242, 139, 205, 248, 237
0000144E= 74 33 EC B9 0F D5 ...    670              DC.B    116, 51 , 236, 185, 15 , 213, 221, 6
00001456                           671  
00001456                           672  -------------------- end include --------------------
00001456                           673              INCLUDE "SHIP.X68"
00001456                           674  ; ==============================================================================
00001456                           675  ; SHIP MANAGEMENT
00001456                           676  ; ==============================================================================
00001456                           677              
00001456                           678  ; ------------------------------------------------------------------------------
00001456                           679             
00001456                           680  SHIPINIT
00001456                           681  ; INITIALIZE SHIP.
00001456                           682  ; INPUT    : NONE 
00001456                           683  ; OUTPUT   : NONE
00001456                           684  ; MODIFIES : NONE
00001456                           685  ; ------------------------------------------------------------------------------
00001456  33FC 0280 000028C8       686              MOVE.W  #SCRHEIGH,(SHIPPOSY)
0000145E  33FC 0140 000028CA       687              MOVE.W  #SCRWIDTH/2,(SHIPPOSX)
00001466  4E75                     688              RTS
00001468                           689              
00001468                           690  ; ------------------------------------------------------------------------------
00001468                           691  SHIPUPD
00001468                           692  ; UPDATES THE SHIP.
00001468                           693  ; INPUT    : NONE 
00001468                           694  ; OUTPUT   : NONE
00001468                           695  ; MODIFIES : NONE
00001468                           696  ; ------------------------------------------------------------------------------
00001468                           697              
00001468  48E7 C000                698              MOVEM.L  D0-D1,-(A7)
0000146C                           699              
0000146C                           700              ; UPDATE Y COORDINATE
0000146C  3039 000028C8            701              MOVE.W  (SHIPPOSY),D0
00001472  0839 0001 000028E2       702              BTST.B  #1,(KBDVAL)
0000147A  6700 0006                703              BEQ     .CHKDWN
0000147E  0440 000A                704              SUB.W   #SHIPSPED,D0
00001482  0839 0003 000028E2       705  .CHKDWN     BTST.B  #3,(KBDVAL)
0000148A  6700 0006                706              BEQ     .CHKLEFT
0000148E  0640 000A                707              ADD.W   #SHIPSPED,D0
00001492                           708              ; UPDATE X COORDINATE
00001492                           709  .CHKLEFT    
00001492  3239 000028CA            710              MOVE.W  (SHIPPOSX),D1
00001498  0839 0000 000028E2       711              BTST.B  #0,(KBDVAL)
000014A0  6700 0006                712              BEQ    .CHKRIGH
000014A4  0441 000A                713              SUB.W   #SHIPSPED,D1
000014A8  0839 0002 000028E2       714  .CHKRIGH    BTST.B  #2,(KBDVAL)
000014B0  6700 000A                715              BEQ     .CONT
000014B4  0641 000A                716              ADD.W   #SHIPSPED,D1
000014B8  6000 0002                717              BRA     .CONT
000014BC                           718       
000014BC                           719              ; CHECK BORDER COLLISIONS
000014BC  B07C 0020                720  .CONT       CMP.W   #SHIPHEIG/2,D0
000014C0  6C00 000A                721              BGE     .CONT2
000014C4  303C 0020                722              MOVE.W  #SHIPHEIG/2,D0
000014C8  6000 0012                723              BRA     .CONT3
000014CC  B07C 024C                724  .CONT2      CMP.W   #SCRHEIGH-SHIPHEIG/2-20,D0
000014D0  6F00 000A                725              BLE     .CONT3
000014D4  303C 024C                726              MOVE.W  #SCRHEIGH-SHIPHEIG/2-20,D0
000014D8                           727             
000014D8                           728  
000014D8  6000 0002                729              BRA     .CONT3
000014DC  B27C 026B                730  .CONT3      CMP     #SCRWIDTH-SHIPWIDT-SHIPWIDT/3,D1
000014E0  6F00 000A                731              BLE     .CONT4
000014E4  323C 026B                732              MOVE.W  #SCRWIDTH-SHIPWIDT-SHIPWIDT/3,D1
000014E8                           733  
000014E8  6000 0012                734              BRA     .DONE
000014EC  B27C 0015                735  .CONT4      CMP.W   #SHIPWIDT+SHIPWIDT/3,D1
000014F0  6C00 000A                736              BGE     .DONE
000014F4  323C 0015                737              MOVE.W  #SHIPWIDT+SHIPWIDT/3,D1
000014F8                           738  
000014F8  6000 0002                739              BRA     .DONE            
000014FC                           740  
000014FC                           741              ; UPDATE VARIABLE
000014FC  33C0 000028C8            742  .DONE       MOVE.W  D0,(SHIPPOSY)
00001502  33C1 000028CA            743              MOVE.W  D1,(SHIPPOSX)
00001508                           744  
00001508                           745              ; CHECK MARCIANOS COLLISIONS
00001508  303C 0002                746              MOVE.W  #2,D0
0000150C  4EB8 105A                747              JSR     DMMFRSTO
00001510  B1FC 00000000            748  .LOOP       CMP.L   #0,A0
00001516  6700 0176                749              BEQ     .CHKMARGD
0000151A  5088                     750              ADD.L   #8,A0
0000151C                           751              
0000151C                           752              ; CHECK HORIZONTAL COLLISION
0000151C  3239 000028CA            753  .CHKHORZ    MOVE.W  (SHIPPOSX),D1
00001522  5141                     754              SUB.W   #SHIPWIDT/2,D1
00001524  3410                     755              MOVE.W  (A0),D2
00001526  0642 0017                756              ADD.W   #MARWIDTH/2,D2
0000152A  B441                     757              CMP.W   D1,D2
0000152C  6D00 0060                758              BLT     .CHKMOT
00001530  0641 0010                759              ADD.W   #SHIPWIDT,D1
00001534  0442 002E                760              SUB.W   #MARWIDTH,D2
00001538  B441                     761              CMP.W   D1,D2
0000153A  6E00 0052                762              BGT     .CHKMOT
0000153E  3239 000028C8            763              MOVE.W  (SHIPPOSY),D1
00001544  0641 0030                764              ADD.W   #SHIPHEIG/2+SHIPHEIG/4,D1
00001548  3428 0002                765              MOVE.W  2(A0),D2
0000154C  0442 0017                766              SUB.W   #MARHEIGH/2,D2
00001550  B441                     767              CMP.W   D1,D2
00001552  6E00 003A                768              BGT     .CHKMOT
00001556  0441 0050                769              SUB.W   #SHIPHEIG+SHIPHEIG/4,D1
0000155A  0642 002E                770              ADD.W   #MARHEIGH,D2
0000155E  B441                     771              CMP.W   D1,D2
00001560  6D00 002C                772              BLT     .CHKMOT
00001564                           773              ;DELETE MARCIANO
00001564  4EB8 10AC                774              JSR     AGLKILL
00001568  3E3C 0001                775              MOVE.W  #1,D7
0000156C  4E42                     776              TRAP    #2
0000156E  5379 000028BC            777              SUBQ.W  #1,(MAXMAR)
00001574                           778             
00001574                           779              ; MODIFY LIVE BAR
00001574  0679 0080 000028CE       780              ADD.W   #SCRWIDTH/5,(LENGLIFE)   
0000157C  5379 000028D0            781              SUBQ.W  #1,(LIFES)
00001582  0C79 0000 000028D2       782              CMP.W   #0,(SCOOUT)
0000158A  6700 00F2                783              BEQ     .NEXT
0000158E                           784  
0000158E                           785              ;CHECK COLLISION IN THE ROCKETS
0000158E  3439 000028CA            786  .CHKMOT     MOVE.W  (SHIPPOSX),D2
00001594  0442 0018                787              SUB.W   #SHIPWIDT+SHIPWIDT/2,D2
00001598  3610                     788              MOVE.W  (A0),D3
0000159A  0643 0017                789              ADD.W   #MARWIDTH/2,D3
0000159E  B642                     790              CMP.W   D2,D3
000015A0  6D00 0060                791              BLT     .CHKMOTRI
000015A4  3439 000028CA            792              MOVE.W  (SHIPPOSX),D2
000015AA  5142                     793              SUB.W   #SHIPWIDT/2,D2
000015AC  B642                     794              CMP.W   D2,D3
000015AE  6E00 0052                795              BGT     .CHKMOTRI
000015B2  3628 0002                796              MOVE.W  2(A0),D3
000015B6  0643 0017                797              ADD.W   #MARHEIGH/2,D3
000015BA  3439 000028C8            798              MOVE.W  (SHIPPOSY),D2
000015C0  B642                     799              CMP.W   D2,D3
000015C2  6D00 003E                800              BLT     .CHKMOTRI
000015C6  0443 002E                801              SUB.W   #MARHEIGH,D3
000015CA  0642 0040                802              ADD.W   #SHIPHEIG,D2
000015CE  0442 0015                803              SUB.W   #SHIPHEIG/3,D2
000015D2  B642                     804              CMP.W   D2,D3
000015D4  6E00 002C                805              BGT     .CHKMOTRI
000015D8                           806              ;DELETE MARCIANO
000015D8  4EB8 10AC                807              JSR     AGLKILL
000015DC  3E3C 0001                808              MOVE.W  #1,D7
000015E0  4E42                     809              TRAP    #2
000015E2  5379 000028BC            810              SUBQ.W  #1,(MAXMAR)
000015E8                           811              ; MODIFY LIVE BAR
000015E8  0679 0080 000028CE       812              ADD.W   #SCRWIDTH/5,(LENGLIFE)   
000015F0  5379 000028D0            813              SUBQ.W  #1,(LIFES)
000015F6  0C79 0000 000028D2       814              CMP.W   #0,(SCOOUT)
000015FE  6700 0002                815              BEQ     .CHKMOTRI
00001602                           816  
00001602                           817              ;CHECK NEXT ROCKET
00001602  3439 000028CA            818  .CHKMOTRI   MOVE.W  (SHIPPOSX),D2
00001608  0642 0018                819              ADD.W   #SHIPWIDT+SHIPWIDT/2,D2
0000160C  3610                     820              MOVE.W  (A0),D3
0000160E  0443 0017                821              SUB.W   #MARWIDTH/2,D3
00001612  B642                     822              CMP.W   D2,D3
00001614  6E00 0068                823              BGT     .NEXT
00001618  3439 000028CA            824              MOVE.W  (SHIPPOSX),D2
0000161E  5042                     825              ADD.W   #SHIPWIDT/2,D2
00001620  B642                     826              CMP.W   D2,D3
00001622  6D00 005A                827              BLT     .NEXT
00001626  3628 0002                828              MOVE.W  2(A0),D3
0000162A  0643 0017                829              ADD.W   #MARHEIGH/2,D3
0000162E  3439 000028C8            830              MOVE.W  (SHIPPOSY),D2
00001634  B642                     831              CMP.W   D2,D3
00001636  6D00 0046                832              BLT     .NEXT
0000163A  0443 002E                833              SUB.W   #MARHEIGH,D3
0000163E  0642 0040                834              ADD.W   #SHIPHEIG,D2
00001642  0442 0015                835              SUB.W   #SHIPHEIG/3,D2
00001646  B642                     836              CMP.W   D2,D3
00001648  6E00 0034                837              BGT     .NEXT
0000164C                           838              ;DELETE MARCIANO
0000164C  4EB8 10AC                839              JSR     AGLKILL
00001650  3E3C 0001                840              MOVE.W  #1,D7
00001654  4E42                     841              TRAP    #2
00001656  5379 000028BC            842              SUBQ.W  #1,(MAXMAR)
0000165C                           843  
0000165C                           844              ; MODIFY LIVE BAR
0000165C  0679 0080 000028CE       845              ADD.W   #SCRWIDTH/5,(LENGLIFE)   
00001664  5379 000028D0            846              SUBQ.W  #1,(LIFES)
0000166A  0C79 0000 000028D2       847              CMP.W   #0,(SCOOUT)
00001672  6700 000A                848              BEQ     .NEXT
00001676                           849  
00001676                           850              ; MODIFY POINTS
00001676  0479 0032 000028D2       851              SUB.W   #POINTS,(SCOOUT)
0000167E  4EB8 107C                852  .NEXT       JSR     DMMNEXTO
00001682  B07C 0002                853              CMP.W   #2,D0
00001686  6600 000E                854              BNE     .GUIDELOOP
0000168A  6000 FE84                855              BRA     .LOOP
0000168E                           856              
0000168E  303C 0004                857  .CHKMARGD            MOVE.W  #4,D0
00001692  4EB8 105A                858              JSR     DMMFRSTO
00001696  B1FC 00000000            859  .GUIDELOOP  CMP.L   #0,A0
0000169C  6700 0008                860              BEQ     .EXIT
000016A0  5088                     861              ADD.L   #8,A0
000016A2  6000 FE78                862              BRA     .CHKHORZ
000016A6                           863  
000016A6  4CDF 0003                864  .EXIT       MOVEM.L  (A7)+,D0-D1
000016AA                           865  
000016AA  4E75                     866              RTS
000016AC                           867              
000016AC                           868  ; ------------------------------------------------------------------------------
000016AC                           869  SHIPPLOT
000016AC                           870  ; PLOT THE SHIP.
000016AC                           871  ; INPUT    : NONE 
000016AC                           872  ; OUTPUT   : NONE
000016AC                           873  ; MODIFIES : NONE
000016AC                           874  ; ------------------------------------------------------------------------------
000016AC                           875  
000016AC  48E7 F800                876              MOVEM.L D0-D4/D1-D2,-(A7)
000016B0                           877  ; NUCLEUS RECTANGLE_______________________
000016B0                           878  
000016B0                           879              ; SET CONTOUR COLOR
000016B0  103C 0050                880              MOVE.B  #80,D0
000016B4  223C 00FF0000            881              MOVE.L  #NUCPCOL,D1
000016BA  4E4F                     882              TRAP    #15
000016BC                           883              
000016BC                           884              ; SET FILL COLOR
000016BC  103C 0051                885              MOVE.B  #81,D0
000016C0  223C 00FF0000            886              MOVE.L  #NUCFCOL,D1
000016C6  4E4F                     887              TRAP    #15
000016C8                           888              
000016C8                           889              ; DEFINE COORDINATES
000016C8  3239 000028CA            890              MOVE.W  (SHIPPOSX),D1
000016CE  5141                     891              SUB.W   #SHIPWIDT/2,D1
000016D0  3439 000028C8            892              MOVE.W  (SHIPPOSY),D2
000016D6  0442 0020                893              SUB.W   #SHIPHEIG/2,D2
000016DA  3639 000028CA            894              MOVE.W  (SHIPPOSX),D3
000016E0  5043                     895              ADD.W   #SHIPWIDT/2,D3
000016E2  3802                     896              MOVE.W  D2,D4
000016E4  0644 0040                897              ADD.W   #SHIPHEIG,D4
000016E8                           898  
000016E8                           899              ; DRAW NUCLEUS RECTANGLE
000016E8  103C 0057                900              MOVE.B  #87,D0
000016EC  4E4F                     901              TRAP    #15
000016EE                           902  
000016EE                           903              
000016EE                           904  ; LEFT RECTANGLE__________________________
000016EE                           905  
000016EE                           906              ; SET CONTOUR COLOR
000016EE  103C 0050                907              MOVE.B  #80,D0
000016F2  223C 00FFFF00            908              MOVE.L  #MOTPCOL,D1
000016F8  4E4F                     909              TRAP    #15
000016FA                           910              
000016FA                           911              ; SET FILL COLOR
000016FA  103C 0051                912              MOVE.B  #81,D0
000016FE  223C 00FFFF00            913              MOVE.L  #MOTFCOL,D1
00001704  4E4F                     914              TRAP    #15
00001706                           915              
00001706                           916              ; DEFINE COORDINATES
00001706  3239 000028CA            917              MOVE.W  (SHIPPOSX),D1
0000170C  0441 000A                918              SUB.W   #SHIPWIDT/2+2,D1
00001710  3439 000028C8            919              MOVE.W  (SHIPPOSY),D2
00001716  3639 000028CA            920              MOVE.W  (SHIPPOSX),D3
0000171C  0443 0015                921              SUB.W   #SHIPWIDT+SHIPWIDT/3,D3
00001720  3802                     922              MOVE.W  D2,D4
00001722  0644 0040                923              ADD.W   #SHIPHEIG,D4
00001726  0444 0015                924              SUB.W   #SHIPHEIG/3,D4
0000172A                           925              
0000172A                           926              ; DRAW LEFT RECTANGLE
0000172A  103C 0057                927              MOVE.B  #87,D0
0000172E  4E4F                     928              TRAP    #15
00001730                           929  
00001730                           930  
00001730                           931  
00001730                           932  ; RIGHT RECTANGLE_________________________
00001730                           933              ; SET CONTOUR COLOR
00001730  103C 0050                934              MOVE.B  #80,D0
00001734  223C 00FFFF00            935              MOVE.L  #MOTPCOL,D1
0000173A  4E4F                     936              TRAP    #15
0000173C                           937              
0000173C                           938              ; SET FILL COLOR
0000173C  103C 0051                939              MOVE.B  #81,D0
00001740  223C 00FFFF00            940              MOVE.L  #MOTFCOL,D1
00001746  4E4F                     941              TRAP    #15
00001748                           942              
00001748                           943              ; DEFINE COORDINATES
00001748  3239 000028CA            944              MOVE.W  (SHIPPOSX),D1
0000174E  0641 000A                945              ADD.W   #SHIPWIDT/2+2,D1
00001752  3439 000028C8            946              MOVE.W  (SHIPPOSY),D2
00001758  3639 000028CA            947              MOVE.W  (SHIPPOSX),D3
0000175E  0643 0015                948              ADD.W   #SHIPWIDT+SHIPWIDT/3,D3
00001762  3802                     949              MOVE.W  D2,D4
00001764  0644 0040                950              ADD.W   #SHIPHEIG,D4
00001768  0444 0015                951              SUB.W   #SHIPHEIG/3,D4
0000176C                           952              
0000176C                           953              ; DRAW RIGHT RECTANGLE
0000176C  103C 0057                954              MOVE.B  #87,D0
00001770  4E4F                     955              TRAP    #15
00001772                           956              
00001772                           957              
00001772                           958              
00001772                           959              ; SET CONTOUR COLOR
00001772  103C 0050                960              MOVE.B  #80,D0
00001776  223C 00FFFFF0            961              MOVE.L  #$00FFFFF0,D1
0000177C  4E4F                     962              TRAP    #15
0000177E                           963              
0000177E                           964              ; SET FILL COLOR
0000177E  103C 0051                965              MOVE.B  #81,D0
00001782  223C 0000FF00            966              MOVE.L  #$0000FF00,D1
00001788  4E4F                     967              TRAP    #15
0000178A                           968              ; DEFINE COORDINATES
0000178A  3039 000028D0            969              MOVE.W  (LIFES),D0
00001790  B07C 0000                970              CMP.W   #0,D0
00001794  6F00 0038                971              BLE     .DEAD
00001798  303C 0000                972              MOVE.W  #0,D0
0000179C  D079 000028CE            973              ADD.W   (LENGLIFE),D0
000017A2  3200                     974              MOVE.W  D0,D1
000017A4  0641 0014                975              ADD.W   #20,D1
000017A8  343C 0280                976              MOVE.W  #SCRHEIGH,D2
000017AC  0442 000A                977              SUB.W   #10,D2
000017B0  303C 0280                978              MOVE.W  #SCRWIDTH,D0
000017B4  9079 000028CE            979              SUB.W   (LENGLIFE),D0
000017BA  3600                     980              MOVE.W  D0,D3
000017BC  0443 0014                981              SUB.W   #20,D3
000017C0  383C 0280                982              MOVE.W  #SCRHEIGH,D4
000017C4  0444 0017                983              SUB.W   #23,D4
000017C8                           984              
000017C8                           985              
000017C8                           986              ; DRAW LIFE BAR
000017C8  103C 0057                987              MOVE.B  #87,D0
000017CC  4E4F                     988              TRAP    #15
000017CE                           989  
000017CE                           990  
000017CE  4CDF 001F                991  .DEAD       MOVEM.L (A7)+,D0-D4/D1-D2
000017D2                           992  
000017D2  4E75                     993              RTS
000017D4                           994              
000017D4  4CDF 000F                995              MOVEM.L (A7)+,D1-D2/D0-D3
000017D8  4E75                     996              RTS
000017DA                           997  
000017DA                           998  
000017DA                           999  
000017DA                          1000  -------------------- end include --------------------
000017DA                          1001              INCLUDE "SHOOTMAR.X68"
000017DA                          1002  ; ==============================================================================
000017DA                          1003  ; SHOOTMAR MANAGEMENT (AGENT)
000017DA                          1004  ; MARPOSX  (W)      (A1)
000017DA                          1005  ; MARPOSY  (W)     2(A1)
000017DA                          1006  ; ==============================================================================
000017DA                          1007              
000017DA                          1008  ; ------------------------------------------------------------------------------
000017DA                          1009  SHTMAINT
000017DA                          1010  ; INITIALIZE SHOOT.
000017DA                          1011  ; INPUT    : NONE 
000017DA                          1012  ; OUTPUT   : NONE
000017DA                          1013  ; MODIFIES : NONE
000017DA                          1014  ; ------------------------------------------------------------------------------
000017DA  48E7 80C0               1015              MOVEM.L D0/A0-A1,-(A7)
000017DE  3094                    1016              MOVE.W  (A4),(A0)
000017E0  316C 0002 0002          1017              MOVE.W  2(A4),2(A0)
000017E6  0668 002E 0002          1018              ADD.W   #MARHEIGH,2(A0)
000017EC                          1019              
000017EC  33FC 000F 000028AE      1020              MOVE.W  #SHOTSPED,(SHOTVELY)
000017F4  4CDF 0301               1021              MOVEM.L (A7)+,D0/A0-A1
000017F8  4E75                    1022              RTS
000017FA                          1023              
000017FA                          1024  ; ------------------------------------------------------------------------------
000017FA                          1025  SHTMAUPD
000017FA                          1026  ; UPDATES THE SHOOT.
000017FA                          1027  ; INPUT    : NONE 
000017FA                          1028  ; OUTPUT   : NONE
000017FA                          1029  ; MODIFIES : NONE
000017FA                          1030  ; ------------------------------------------------------------------------------
000017FA                          1031  
000017FA  48A7 F0C0               1032              MOVEM.W D0-D3/A0-A1,-(A7)
000017FE                          1033  
000017FE                          1034              ; UPDATE SHOOT COORDINATES
000017FE  43D0                    1035              LEA.L   (A0),A1
00001800  3229 0002               1036              MOVE.W  2(A1),D1
00001804  0641 000F               1037              ADD.W   #SHOTSPED,D1
00001808                          1038              
00001808                          1039              ; CHECK SHIP'S NUCLEOUS COLLISION
00001808                          1040              
00001808                          1041                ; HORIZONTAL
00001808  3611                    1042              MOVE.W  (A1),D3
0000180A  5443                    1043              ADD.W   #SHTMAWIT/2,D3
0000180C  3439 000028CA           1044              MOVE.W  (SHIPPOSX),D2
00001812  5142                    1045              SUB.W   #SHIPWIDT/2,D2
00001814  B642                    1046              CMP.W   D2,D3
00001816  6D00 0036               1047              BLT     .CHKMOT
0000181A  5B43                    1048              SUB.W   #SHTMAWIT,D3
0000181C  0642 0010               1049              ADD.W   #SHIPWIDT,D2
00001820  B642                    1050              CMP.W   D2,D3
00001822  6E00 002A               1051              BGT     .CHKMOT
00001826                          1052              
00001826                          1053                ; VERTICAL
00001826  3629 0002               1054              MOVE.W  2(A1),D3
0000182A  3439 000028C8           1055              MOVE.W  (SHIPPOSY),D2
00001830  5A43                    1056              ADD.W   #SHTMAHEI/2,D3
00001832  0642 0020               1057              ADD.W   #SHIPHEIG/2,D2
00001836  B642                    1058              CMP.W   D2,D3
00001838  6E00 0014               1059              BGT     .CHKMOT
0000183C  0443 000A               1060              SUB.W   #SHTMAHEI,D3
00001840  0442 0040               1061              SUB.W   #SHIPHEIG,D2
00001844  B642                    1062              CMP.W   D2,D3
00001846  6D00 0006               1063              BLT     .CHKMOT
0000184A  6000 0092               1064              BRA     .DESTROY
0000184E                          1065                         
0000184E                          1066              ; CHECK SHIP'S MOTORS COLLISION
0000184E                          1067              
0000184E                          1068                ; HORIZONTAL LEFT
0000184E  3439 000028CA           1069  .CHKMOT     MOVE.W  (SHIPPOSX),D2
00001854  0442 0018               1070              SUB.W   #SHIPWIDT+SHIPWIDT/2,D2
00001858  3611                    1071              MOVE.W  (A1),D3
0000185A  5443                    1072              ADD.W   #SHTMAWIT/2,D3
0000185C  B642                    1073              CMP.W   D2,D3
0000185E  6D00 0038               1074              BLT     .CHKMOTRI
00001862  3439 000028CA           1075              MOVE.W  (SHIPPOSX),D2
00001868  5142                    1076              SUB.W   #SHIPWIDT/2,D2
0000186A  B642                    1077              CMP.W   D2,D3
0000186C  6E00 002A               1078              BGT     .CHKMOTRI
00001870                          1079              
00001870                          1080                ; VERTICAL
00001870  3629 0002               1081              MOVE.W  2(A1),D3
00001874  5A43                    1082              ADD.W   #SHTMAHEI/2,D3
00001876  3439 000028C8           1083              MOVE.W  (SHIPPOSY),D2
0000187C  B642                    1084              CMP.W   D2,D3
0000187E  6D00 0018               1085              BLT     .CHKMOTRI
00001882  0443 000A               1086              SUB.W   #SHTMAHEI,D3
00001886  0642 0040               1087              ADD.W   #SHIPHEIG,D2
0000188A  0442 0015               1088              SUB.W   #SHIPHEIG/3,D2
0000188E  B642                    1089              CMP.W   D2,D3
00001890  6E00 0006               1090              BGT     .CHKMOTRI
00001894  6000 0048               1091              BRA     .DESTROY
00001898                          1092              
00001898                          1093                ; HORIZONTAL RIGHT
00001898  3439 000028CA           1094  .CHKMOTRI   MOVE.W  (SHIPPOSX),D2
0000189E  0642 0018               1095              ADD.W   #SHIPWIDT+SHIPWIDT/2,D2
000018A2  3611                    1096              MOVE.W  (A1),D3
000018A4  5543                    1097              SUB.W   #SHTMAWIT/2,D3
000018A6  B642                    1098              CMP.W   D2,D3
000018A8  6E00 0052               1099              BGT     .CHKVECO
000018AC  3439 000028CA           1100              MOVE.W  (SHIPPOSX),D2
000018B2  5042                    1101              ADD.W   #SHIPWIDT/2,D2
000018B4  B642                    1102              CMP.W   D2,D3
000018B6  6D00 0044               1103              BLT     .CHKVECO
000018BA                          1104                ; VERTICAL
000018BA  3629 0002               1105              MOVE.W  2(A1),D3
000018BE  5A43                    1106              ADD.W   #SHTMAHEI/2,D3
000018C0  3439 000028C8           1107              MOVE.W  (SHIPPOSY),D2
000018C6  B642                    1108              CMP.W   D2,D3
000018C8  6D00 0032               1109              BLT     .CHKVECO
000018CC  0443 000A               1110              SUB.W   #SHTMAHEI,D3
000018D0  0642 0040               1111              ADD.W   #SHIPHEIG,D2
000018D4  0442 0015               1112              SUB.W   #SHIPHEIG/3,D2
000018D8  B642                    1113              CMP.W   D2,D3
000018DA  6E00 0020               1114              BGT     .CHKVECO
000018DE                          1115       
000018DE                          1116              
000018DE                          1117              ; KILLS THE SHOOTMAR AGENT AND UPDATES DE LIVE BAR
000018DE  3E3C 0001               1118  .DESTROY    MOVE.W  #1,D7
000018E2  4E42                    1119              TRAP    #2
000018E4  4EB8 10AC               1120              JSR     AGLKILL
000018E8  0679 0080 000028CE      1121              ADD.W   #SCRWIDTH/5,(LENGLIFE)   
000018F0  5379 000028D0           1122              SUBQ.W  #1,(LIFES)
000018F6  5379 000028C6           1123              SUBQ.W  #1,(MAXSHTMA)
000018FC                          1124  
000018FC                          1125              ; CHECK BORDER'S VERTICAL COLLISIONS
000018FC  B27C 027B               1126  .CHKVECO    CMP.W   #SCRHEIGH-SHTMAHEI/2,D1
00001900  6D00 0010               1127              BLT     .DONE
00001904  4EB8 10AC               1128              JSR     AGLKILL
00001908  5379 000028C6           1129              SUBQ.W  #1,(MAXSHTMA)
0000190E  6000 0002               1130              BRA     .DONE
00001912                          1131  
00001912                          1132           
00001912                          1133            ; STORE POSITION
00001912  3341 0002               1134  .DONE      MOVE.W  D1,2(A1)
00001916  4C9F 030F               1135            MOVEM.W (A7)+,D0-D3/A0-A1
0000191A                          1136  
0000191A  4E75                    1137              RTS
0000191C                          1138              
0000191C                          1139  ; ------------------------------------------------------------------------------
0000191C                          1140  SHTMAPLT
0000191C                          1141  ; PLOT THE SHOOT.
0000191C                          1142  ; INPUT    : NONE 
0000191C                          1143  ; OUTPUT   : NONE
0000191C                          1144  ; MODIFIES : NONE
0000191C                          1145  ; ------------------------------------------------------------------------------
0000191C  48E7 F800               1146              MOVEM.L D0-D4,-(A7)
00001920                          1147  
00001920                          1148              ; SET PEN COLOR
00001920  103C 0050               1149              MOVE.B  #80,D0
00001924  223C AA000000           1150              MOVE.L  #SHOTPCOL,D1
0000192A  4E4F                    1151              TRAP    #15
0000192C                          1152              
0000192C                          1153              ; SET FILL COLOR
0000192C  103C 0051               1154              MOVE.B  #81,D0
00001930  223C FF000000           1155              MOVE.L  #SHOTFCOL,D1
00001936  4E4F                    1156              TRAP    #15
00001938                          1157              
00001938                          1158              ; DEFINE COORDINATES
00001938  3210                    1159              MOVE.W  (A0),D1
0000193A  5541                    1160              SUB.W   #SHTMAWIT/2,D1
0000193C  3428 0002               1161              MOVE.W  2(A0),D2
00001940  0442 000A               1162              SUB.W   #SHTMAHEI,D2
00001944  3601                    1163              MOVE.W  D1,D3
00001946  5A43                    1164              ADD.W   #SHTMAWIT,D3
00001948  3802                    1165              MOVE.W  D2,D4
0000194A  0644 000A               1166              ADD.W   #SHTMAHEI,D4
0000194E                          1167              
0000194E                          1168              ; DRAW RECTANGLE
0000194E  103C 0057               1169              MOVE.B  #87,D0
00001952  4E4F                    1170              TRAP    #15
00001954                          1171              
00001954  4CDF 001F               1172              MOVEM.L (A7)+,D0-D4
00001958                          1173  
00001958  4E75                    1174              RTS
0000195A                          1175  
0000195A                          1176  
0000195A                          1177  -------------------- end include --------------------
0000195A                          1178              INCLUDE "SHOOT.X68"
0000195A                          1179  ; ==============================================================================
0000195A                          1180  ; SHOOT MANAGEMENT (AGENT)
0000195A                          1181  ; SHIPPOSX                     (W)      (A0)
0000195A                          1182  ; SHIPPOSY-SHIPHEIG/2-SHOTRAD  (W)     2(A0)
0000195A                          1183  ; ==============================================================================
0000195A                          1184  
0000195A                          1185  ; ------------------------------------------------------------------------------
0000195A                          1186  SHOTINIT
0000195A                          1187  ; INITIALIZE SHOOT.
0000195A                          1188  ; INPUT    : NONE
0000195A                          1189  ; OUTPUT   : NONE
0000195A                          1190  ; MODIFIES : NONE
0000195A                          1191  ; ------------------------------------------------------------------------------
0000195A  48E7 8080               1192              MOVEM.L D0/A0,-(A7)
0000195E  30B9 000028CA           1193              MOVE.W  (SHIPPOSX),(A0)
00001964  3179 000028C8 0002      1194              MOVE.W  (SHIPPOSY),2(A0)
0000196C  0468 0020 0002          1195              SUB.W   #SHIPHEIG/2,2(A0)
00001972  5168 0002               1196              SUB.W   #SHOTRAD,2(A0)
00001976  33FC 000F 000028AE      1197              MOVE.W  #SHOTSPED,(SHOTVELY)
0000197E  4CDF 0101               1198              MOVEM.L (A7)+,D0/A0
00001982  4E75                    1199              RTS
00001984                          1200              
00001984                          1201  ; ------------------------------------------------------------------------------
00001984                          1202  SHOTUPD
00001984                          1203  ; UPDATES THE SHOOT.
00001984                          1204  ; INPUT    : NONE 
00001984                          1205  ; OUTPUT   : NONE
00001984                          1206  ; MODIFIES : NONE
00001984                          1207  ; ------------------------------------------------------------------------------
00001984                          1208  
00001984  48A7 F0C0               1209              MOVEM.W D0-D3/A0-A1,-(A7)
00001988                          1210  
00001988                          1211              ; UPDATE SHOOT COORDINATES
00001988  43D0                    1212              LEA.L   (A0),A1
0000198A  3229 0002               1213              MOVE.W  2(A1),D1
0000198E  9279 000028AE           1214              SUB.W   (SHOTVELY),D1
00001994                          1215              
00001994                          1216  
00001994                          1217              ; CHECK VERTICAL COLLISIONS
00001994  B27C 0278               1218              CMP.W   #SCRHEIGH-SHOTRAD,D1
00001998  6E00 00B6               1219              BGT     .COLBOT
0000199C  B27C 0000               1220              CMP.W   #0,D1
000019A0  6D00 00BC               1221              BLT     .COLTOP
000019A4  303C 0002               1222              MOVE.W  #2,D0
000019A8  4EB8 105A               1223              JSR     DMMFRSTO
000019AC  B1FC 00000000           1224  .LOOP       CMP.L   #0,A0
000019B2  6700 0080               1225              BEQ     .CHKGUIDE
000019B6  5088                    1226              ADD.L   #8,A0
000019B8                          1227  
000019B8  6000 0002               1228              BRA     .MAREJY0
000019BC                          1229              
000019BC                          1230  .MAREJY0    ; Y0    COLLISION
000019BC  3629 0002               1231              MOVE.W  2(A1),D3
000019C0  3428 0002               1232              MOVE.W  2(A0),D2
000019C4  0642 001F               1233              ADD.W   #MARHEIGH/2+SHOTRAD,D2
000019C8  B642                    1234              CMP.W   D2,D3
000019CA  6D00 0006               1235              BLT     .MAREJY1          
000019CE  6000 0054               1236              BRA     .NEXT
000019D2                          1237              
000019D2                          1238  .MAREJY1
000019D2  3428 0002               1239              MOVE.W  2(A0),D2
000019D6  0442 001F               1240              SUB.W   #MARHEIGH/2+SHOTRAD,D2
000019DA  B642                    1241              CMP.W   D2,D3
000019DC  6E00 0006               1242              BGT     .MAREJX0
000019E0  6000 0042               1243              BRA     .NEXT
000019E4                          1244              
000019E4                          1245  .MAREJX0    
000019E4  3410                    1246              MOVE.W  (A0),D2
000019E6  0442 0017               1247              SUB.W   #MARWIDTH/2 ,D2
000019EA  5142                    1248              SUB.W   #SHOTRAD,D2
000019EC  3611                    1249              MOVE.W  (A1),D3
000019EE  B642                    1250              CMP.W   D2,D3
000019F0  6E00 0006               1251              BGT     .MAREJX1
000019F4  6000 002E               1252              BRA     .NEXT
000019F8                          1253              
000019F8  3410                    1254  .MAREJX1    MOVE.W  (A0),D2
000019FA  0642 0017               1255              ADD.W   #MARWIDTH/2,D2
000019FE  5042                    1256              ADD.W   #SHOTRAD,D2
00001A00  B642                    1257              CMP.W   D2,D3
00001A02  6E00 0020               1258              BGT     .NEXT
00001A06  3E3C 0000               1259              MOVE.W  #0,D7
00001A0A  4E42                    1260              TRAP    #2
00001A0C  4EB8 10AC               1261              JSR     AGLKILL
00001A10  5379 000028BC           1262              SUBQ.W  #1,(MAXMAR)
00001A16  0679 0032 000028D2      1263              ADD.W  #POINTS,(SCOOUT)
00001A1E  41D1                    1264              LEA.L   (A1),A0
00001A20  4EB8 10AC               1265              JSR     AGLKILL
00001A24  4EB8 107C               1266  .NEXT       JSR     DMMNEXTO
00001A28  B07C 0002               1267              CMP.W   #2,D0
00001A2C  6600 000E               1268              BNE     .GUIDELOOP
00001A30  6000 FF7A               1269              BRA     .LOOP
00001A34                          1270              
00001A34                          1271              
00001A34  303C 0004               1272  .CHKGUIDE   MOVE.W  #4,D0
00001A38  4EB8 105A               1273              JSR     DMMFRSTO
00001A3C  B1FC 00000000           1274  .GUIDELOOP  CMP.L   #0,A0
00001A42  6700 0022               1275              BEQ     .DONE
00001A46  5088                    1276              ADD.L   #8,A0
00001A48                          1277  
00001A48  6000 FF72               1278              BRA     .MAREJY0
00001A4C  6000 0018               1279              BRA     .DONE
00001A50                          1280              
00001A50                          1281  
00001A50                          1282              
00001A50                          1283  
00001A50                          1284              ; BOTTOM COLLISION
00001A50  4479 000028AE           1285  .COLBOT     NEG.W   (SHOTVELY)
00001A56  323C 0278               1286              MOVE.W  #SCRHEIGH-SHOTRAD,D1
00001A5A  6000 000A               1287              BRA     .DONE
00001A5E                          1288           
00001A5E                          1289              
00001A5E                          1290              
00001A5E                          1291              ; TOP COLLISION
00001A5E  4EB8 10AC               1292  .COLTOP     JSR   AGLKILL
00001A62  6000 0002               1293              BRA   .DONE
00001A66                          1294  
00001A66                          1295    
00001A66                          1296  
00001A66                          1297             ; STORE POSITION
00001A66  3341 0002               1298  .DONE      MOVE.W  D1,2(A1)
00001A6A  4C9F 030F               1299             MOVEM.W (A7)+,D0-D3/A0-A1
00001A6E                          1300  
00001A6E  4E75                    1301              RTS
00001A70                          1302              
00001A70                          1303  ; ------------------------------------------------------------------------------
00001A70                          1304  SHOTPLOT
00001A70                          1305  ; PLOT THE SHOOT.
00001A70                          1306  ; INPUT    : NONE 
00001A70                          1307  ; OUTPUT   : NONE
00001A70                          1308  ; MODIFIES : NONE
00001A70                          1309  ; ------------------------------------------------------------------------------
00001A70  48E7 F800               1310              MOVEM.L D0-D4,-(A7)
00001A74                          1311  
00001A74                          1312              ; SET PEN COLOR
00001A74  103C 0050               1313              MOVE.B  #80,D0
00001A78  223C AA000000           1314              MOVE.L  #SHOTPCOL,D1
00001A7E  4E4F                    1315              TRAP    #15
00001A80                          1316              
00001A80                          1317              ; SET FILL COLOR
00001A80  103C 0051               1318              MOVE.B  #81,D0
00001A84  223C FF000000           1319              MOVE.L  #SHOTFCOL,D1
00001A8A  4E4F                    1320              TRAP    #15
00001A8C                          1321              
00001A8C                          1322              ; DEFINE COORDINATES
00001A8C  3210                    1323              MOVE.W  (A0),D1
00001A8E  5141                    1324              SUB.W   #SHOTRAD,D1
00001A90  3428 0002               1325              MOVE.W  2(A0),D2
00001A94  5142                    1326              SUB.W   #SHOTRAD,D2
00001A96  3601                    1327              MOVE.W  D1,D3
00001A98  0643 0010               1328              ADD.W   #2*SHOTRAD,D3
00001A9C  3802                    1329              MOVE.W  D2,D4
00001A9E  0644 0010               1330              ADD.W   #2*SHOTRAD,D4
00001AA2                          1331              
00001AA2                          1332              ; DRAW CIRCLE
00001AA2  103C 0058               1333              MOVE.B  #88,D0
00001AA6  4E4F                    1334              TRAP    #15
00001AA8                          1335              
00001AA8  4CDF 001F               1336              MOVEM.L (A7)+,D0-D4
00001AAC                          1337  
00001AAC  4E75                    1338              RTS
00001AAE                          1339  
00001AAE                          1340  
00001AAE                          1341  -------------------- end include --------------------
00001AAE                          1342              INCLUDE "MARGUIDE.X68"
00001AAE                          1343  ; ==============================================================================
00001AAE                          1344  ; MARGUID MANAGEMENT (AGENT)
00001AAE                          1345  ; SUMARGUI  (W)      (A0)
00001AAE                          1346  ; MAGUIHIG  (W)     2(A0)
00001AAE                          1347  ; GUISPEED  (W)     4(A0)
00001AAE                          1348  ; ==============================================================================
00001AAE                          1349              
00001AAE                          1350  ; ------------------------------------------------------------------------------
00001AAE                          1351  GUIDEINT
00001AAE                          1352  ; INITIALIZE MARGUID.
00001AAE                          1353  ; INPUT    : NONE 
00001AAE                          1354  ; OUTPUT   : NONE
00001AAE                          1355  ; MODIFIES : NONE
00001AAE                          1356  ; ------------------------------------------------------------------------------
00001AAE  48E7 8080               1357              MOVEM.L  D0/A0,-(A7)
00001AB2  3094                    1358              MOVE.W  (A4),(A0)
00001AB4  316C 0002 0002          1359              MOVE.W  2(A4),2(A0)
00001ABA  317C 0002 0004          1360              MOVE.W  #GUISPEED,4(A0)
00001AC0  4CDF 0101               1361              MOVEM.L (A7)+,D0/A0
00001AC4  4E75                    1362              RTS
00001AC6                          1363              
00001AC6                          1364  ; ------------------------------------------------------------------------------
00001AC6                          1365  
00001AC6                          1366  GUIDEIPD
00001AC6                          1367  ; UPDATES THE MARGUID.
00001AC6                          1368  ; INPUT    : NONE 
00001AC6                          1369  ; OUTPUT   : NONE
00001AC6                          1370  ; MODIFIES : NONE
00001AC6                          1371  ; ------------------------------------------------------------------------------
00001AC6                          1372  
00001AC6  48A7 E0C0               1373              MOVEM.W D0-D2/A0-A1,-(A7)
00001ACA                          1374              ; UPDATE MARCIANOS COORDINATES
00001ACA                          1375              ;CHECK MARGUIDE ABOUT SHIP POSITION Y
00001ACA  3039 000028C8           1376              MOVE.W  (SHIPPOSY),D0
00001AD0  3228 0002               1377              MOVE.W  2(A0),D1
00001AD4  B240                    1378              CMP.W   D0,D1
00001AD6  6700 0042               1379              BEQ     .GUIDEX
00001ADA  3039 000028C8           1380              MOVE.W  (SHIPPOSY),D0
00001AE0  5340                    1381              SUBQ.W  #1,D0
00001AE2  3228 0002               1382              MOVE.W  2(A0),D1
00001AE6  B240                    1383              CMP.W   D0,D1
00001AE8  6D00 0024               1384              BLT     .FALLGUIDE
00001AEC  3039 000028C8           1385              MOVE.W  (SHIPPOSY),D0
00001AF2  5240                    1386              ADDQ.W  #1,D0
00001AF4  3228 0002               1387              MOVE.W  2(A0),D1
00001AF8  B240                    1388              CMP.W   D0,D1
00001AFA  6D00 001E               1389              BLT     .GUIDEX
00001AFE                          1390              ;MOVEMENT UP
00001AFE  3028 0002               1391              MOVE.W  2(A0),D0 
00001B02  9068 0004               1392              SUB.W   4(A0),D0
00001B06  3140 0002               1393              MOVE.W  D0,2(A0)
00001B0A  6000 000E               1394              BRA     .GUIDEX
00001B0E                          1395              ;MOVEMENT DOWN
00001B0E                          1396  .FALLGUIDE  
00001B0E  3028 0002               1397              MOVE.W  2(A0),D0 
00001B12  D068 0004               1398              ADD.W   4(A0),D0
00001B16  3140 0002               1399              MOVE.W  D0,2(A0)
00001B1A                          1400              ;COMPARE POSITION X BETWEEN MARGUIDE AND SHIP     
00001B1A  3039 000028CA           1401  .GUIDEX     MOVE.W  (SHIPPOSX),D0
00001B20  3210                    1402              MOVE.W  (A0),D1
00001B22  B240                    1403              CMP.W   D0,D1
00001B24  6700 0036               1404              BEQ     .DONE
00001B28  3039 000028CA           1405              MOVE.W  (SHIPPOSX),D0
00001B2E  5340                    1406              SUBQ.W  #1,D0
00001B30  3210                    1407              MOVE.W  (A0),D1
00001B32  B240                    1408              CMP.W   D0,D1
00001B34  6D00 001E               1409              BLT     .RTGUIDE
00001B38  3039 000028CA           1410              MOVE.W  (SHIPPOSX),D0
00001B3E  5240                    1411              ADDQ.W  #1,D0
00001B40  3210                    1412              MOVE.W  (A0),D1
00001B42  B240                    1413              CMP.W   D0,D1
00001B44  6D00 0016               1414              BLT     .DONE
00001B48                          1415              ;MOVEMENT TO THE LEFT
00001B48  3010                    1416              MOVE.W  (A0),D0 
00001B4A  9068 0004               1417              SUB.W   4(A0),D0
00001B4E  3080                    1418              MOVE.W  D0,(A0)
00001B50  6000 000A               1419              BRA     .DONE 
00001B54                          1420              ;MOVEMENT TO THE RIGHT   
00001B54  3010                    1421  .RTGUIDE    MOVE.W  (A0),D0 
00001B56  D068 0004               1422              ADD.W   4(A0),D0
00001B5A  3080                    1423              MOVE.W  D0,(A0)    
00001B5C                          1424  .DONE
00001B5C  4C9F 0307               1425         MOVEM.W (A7)+,D0-D2/A0-A1
00001B60                          1426  
00001B60  4E75                    1427              RTS
00001B62                          1428              
00001B62                          1429  ; ------------------------------------------------------------------------------
00001B62                          1430  GUIDEPLT
00001B62                          1431  ; PLOT THE MARGUID.
00001B62                          1432  ; INPUT    : NONE 
00001B62                          1433  ; OUTPUT   : NONE
00001B62                          1434  ; MODIFIES : NONE
00001B62                          1435  ; ------------------------------------------------------------------------------
00001B62  48E7 F800               1436              MOVEM.L D0-D4,-(A7)
00001B66                          1437  
00001B66                          1438  ; CIRCLE__________________________________
00001B66                          1439  
00001B66                          1440              ; SET PEN COLOR
00001B66  103C 0050               1441              MOVE.B  #80,D0
00001B6A  223C 00000080           1442              MOVE.L  #GCIRPCOL,D1
00001B70  4E4F                    1443              TRAP    #15
00001B72                          1444              
00001B72                          1445              ; SET FILL COLOR
00001B72  103C 0051               1446              MOVE.B  #81,D0
00001B76  223C 00000080           1447              MOVE.L  #GCIRFCOL,D1
00001B7C  4E4F                    1448              TRAP    #15
00001B7E                          1449              
00001B7E                          1450              ; DEFINE COORDINATES
00001B7E  3210                    1451              MOVE.W  (A0),D1
00001B80  0441 000B               1452              SUB.W   #MARWIDTH/4,D1
00001B84  3428 0002               1453              MOVE.W  2(A0),D2
00001B88  0442 000B               1454              SUB.W   #MARHEIGH/4,D2
00001B8C  3610                    1455              MOVE.W  (A0),D3
00001B8E  0643 000B               1456              ADD.W   #MARWIDTH/4,D3
00001B92  3828 0002               1457              MOVE.W  2(A0),D4
00001B96  0644 000B               1458              ADD.W   #MARHEIGH/4,D4
00001B9A                          1459              
00001B9A                          1460              ; DRAW CIRCLE       
00001B9A  103C 0058               1461              MOVE.B  #88,D0
00001B9E  4E4F                    1462              TRAP    #15
00001BA0                          1463              
00001BA0                          1464  ; LEFT RECTANGLE__________________________
00001BA0                          1465              
00001BA0                          1466              ; SET PEN COLOR
00001BA0  103C 0050               1467              MOVE.B  #80,D0
00001BA4  223C 0080FFFF           1468              MOVE.L  #GRECPCOL,D1
00001BAA  4E4F                    1469              TRAP    #15
00001BAC                          1470              
00001BAC                          1471              ; SET FILL COLOR
00001BAC  103C 0051               1472              MOVE.B  #81,D0
00001BB0  223C 0080FFFF           1473              MOVE.L  #GRECFCOL,D1
00001BB6  4E4F                    1474              TRAP    #15
00001BB8                          1475              
00001BB8                          1476              ; DEFINE COORDINATES
00001BB8  3210                    1477              MOVE.W  (A0),D1
00001BBA  0441 0017               1478              SUB.W   #MARWIDTH/2,D1
00001BBE  3428 0002               1479              MOVE.W  2(A0),D2
00001BC2  0442 0017               1480              SUB.W   #MARHEIGH/2,D2
00001BC6  3610                    1481              MOVE.W  (A0),D3
00001BC8  0443 000F               1482              SUB.W   #MARWIDTH/3,D3
00001BCC  3828 0002               1483              MOVE.W  2(A0),D4
00001BD0  0644 0017               1484              ADD.W   #MARHEIGH/2,D4
00001BD4                          1485              
00001BD4                          1486              ; DRAW LEFT RECTANGLE
00001BD4                          1487              
00001BD4  103C 0057               1488              MOVE.B  #87,D0
00001BD8  4E4F                    1489              TRAP    #15
00001BDA                          1490              
00001BDA                          1491  ; RIGHT RECTANGLE_________________________
00001BDA                          1492  
00001BDA                          1493              ; SET PEN COLOR
00001BDA  103C 0050               1494              MOVE.B  #80,D0
00001BDE  223C 0080FFFF           1495              MOVE.L  #GRECPCOL,D1
00001BE4  4E4F                    1496              TRAP    #15
00001BE6                          1497              
00001BE6                          1498              ; SET FILL COLOR
00001BE6  103C 0051               1499              MOVE.B  #81,D0
00001BEA  223C 0080FFFF           1500              MOVE.L  #GRECFCOL,D1
00001BF0  4E4F                    1501              TRAP    #15
00001BF2                          1502              
00001BF2                          1503              ; DEFINE COORDINATES
00001BF2  3210                    1504              MOVE.W  (A0),D1
00001BF4  0641 000F               1505              ADD.W   #MARWIDTH/3,D1
00001BF8  3428 0002               1506              MOVE.W  2(A0),D2
00001BFC  0442 0017               1507              SUB.W   #MARHEIGH/2,D2
00001C00  3610                    1508              MOVE.W  (A0),D3
00001C02  0643 0017               1509              ADD.W   #MARWIDTH/2,D3
00001C06  3828 0002               1510              MOVE.W  2(A0),D4
00001C0A  0644 0017               1511              ADD.W   #MARHEIGH/2,D4
00001C0E                          1512              
00001C0E                          1513              ; DRAW RIGHT RECTANGLE
00001C0E                          1514              
00001C0E  103C 0057               1515              MOVE.B  #87,D0
00001C12  4E4F                    1516              TRAP    #15
00001C14                          1517  
00001C14                          1518  
00001C14                          1519              
00001C14  4CDF 001F               1520              MOVEM.L (A7)+,D0-D4
00001C18                          1521  
00001C18  4E75                    1522              RTS
00001C1A                          1523  
00001C1A                          1524  
00001C1A                          1525  
00001C1A                          1526  -------------------- end include --------------------
00001C1A                          1527              INCLUDE "MARCIANOS.X68"
00001C1A                          1528  ; ==============================================================================
00001C1A                          1529  ; MARCIANO MANAGEMENT (AGENT)
00001C1A                          1530  ; SUMMAR    (W)      (A0)
00001C1A                          1531  ; MARHEIGH  (W)     2(A0)
00001C1A                          1532  ; MARSPEDX  (W)     4(A0)
00001C1A                          1533  ; ==============================================================================
00001C1A                          1534              
00001C1A                          1535  ; ------------------------------------------------------------------------------
00001C1A                          1536  MARINIT
00001C1A                          1537  ; INITIALIZE MARCIANO.
00001C1A                          1538  ; INPUT    : NONE
00001C1A                          1539  ; OUTPUT   : NONE
00001C1A                          1540  ; MOIFIES  : NONE
00001C1A                          1541  ; ------------------------------------------------------------------------------
00001C1A  48E7 8080               1542              MOVEM.L  D0/A0,-(A7)
00001C1E  303C 002E               1543              MOVE.W  #MARHEIGH,D0
00001C22  4440                    1544              NEG.W   D0
00001C24  30B9 000028B8           1545              MOVE.W  SUMMAR,(A0)
00001C2A  3140 0002               1546              MOVE.W  D0,2(A0)
00001C2E  3179 000028B6 0004      1547              MOVE.W  MARSPEDX,4(A0)
00001C36  4CDF 0101               1548              MOVEM.L (A7)+,D0/A0
00001C3A  4E75                    1549              RTS
00001C3C                          1550              
00001C3C                          1551  ; ------------------------------------------------------------------------------
00001C3C                          1552  MARUPD
00001C3C                          1553  ; UPDATES THE MARCIANO.
00001C3C                          1554  ; INPUT    : NONE 
00001C3C                          1555  ; OUTPUT   : NONE
00001C3C                          1556  ; MODIFIES : NONE
00001C3C                          1557  ; ------------------------------------------------------------------------------
00001C3C                          1558  
00001C3C  48A7 E0C0               1559              MOVEM.W D0-D2/A0-A1,-(A7)
00001C40                          1560              ; UPDATE MARCIANOS COORDINATES
00001C40  0C79 0004 000028C6      1561              CMP.W   #4,(MAXSHTMA)
00001C48  6E00 0094               1562              BGT     .NOSHOT
00001C4C  43F9 00001E78           1563              LEA     RANDVEC,A1
00001C52  3239 000028C4           1564              MOVE.W  (RDMCOUNT),D1
00001C58  1031 1000               1565              MOVE.B  (A1,D1.W),D0
00001C5C  1439 000028EC           1566              MOVE.B  (SCRINTCY),D2
00001C62  C43C 0064               1567              AND.B   #$64,D2
00001C66  6700 000A               1568              BEQ     .CHKRN
00001C6A  C43C 0035               1569              AND.B   #$35,D2
00001C6E  6600 0032               1570              BNE     .NOTGUIDE
00001C72  B03C 00FD               1571  .CHKRN      CMP.B   #253,D0
00001C76  6600 002A               1572              BNE     .NOTGUIDE
00001C7A  3239 000028BA           1573              MOVE.W  (NUMMAR),D1
00001C80  B27C 0007               1574              CMP.W   #7,D1
00001C84  6600 001C               1575              BNE     .NOTGUIDE
00001C88  4EB8 10AC               1576              JSR     AGLKILL
00001C8C  43F8 1AAE               1577              LEA     GUIDEINT,A1
00001C90  45F8 1AC6               1578              LEA     GUIDEIPD,A2
00001C94  47F8 1B62               1579              LEA     GUIDEPLT,A3
00001C98  303C 0004               1580              MOVE.W  #4,D0
00001C9C  49D0                    1581              LEA.L   (A0),A4
00001C9E  4EB8 128C               1582              JSR     AGLADD
00001CA2                          1583  
00001CA2  43F9 00001E78           1584  .NOTGUIDE   LEA     RANDVEC,A1
00001CA8  3239 000028C4           1585              MOVE.W  (RDMCOUNT),D1
00001CAE  1031 1000               1586              MOVE.B  (A1,D1.W),D0
00001CB2  B03C 000A               1587              CMP.B   #10,D0
00001CB6  6D00 0026               1588              BLT     .NOSHOT
00001CBA  B03C 000B               1589              CMP.B   #11,D0
00001CBE  6E00 001E               1590              BGT     .NOSHOT
00001CC2  43F8 17DA               1591              LEA     SHTMAINT,A1
00001CC6  45F8 17FA               1592              LEA     SHTMAUPD,A2
00001CCA  47F8 191C               1593              LEA     SHTMAPLT,A3
00001CCE  303C 0003               1594              MOVE.W  #3,D0
00001CD2  49D0                    1595              LEA.L   (A0),A4
00001CD4  4EB8 128C               1596              JSR     AGLADD
00001CD8  5279 000028C6           1597              ADDQ.W  #1,(MAXSHTMA)
00001CDE  5279 000028C4           1598  .NOSHOT     ADDQ.W  #1,(RDMCOUNT)
00001CE4  43D0                    1599              LEA.L   (A0),A1
00001CE6  3039 000028C4           1600              MOVE.W  (RDMCOUNT),D0
00001CEC  B07C 00F8               1601              CMP.W   #248,D0
00001CF0  6D00 0008               1602              BLT     .NEXTRDM
00001CF4  4279 000028C4           1603              CLR.W   (RDMCOUNT)
00001CFA                          1604  .NEXTRDM    
00001CFA  0C69 0269 0002          1605              CMP.W  #SCRHEIGH-MARHEIGH/2,2(A1)
00001D00  6D00 0020               1606              BLT     .MOVEMENTY
00001D04  4EB8 10AC               1607              JSR     AGLKILL
00001D08  5379 000028BC           1608              SUBQ.W  #1,(MAXMAR)
00001D0E  0C79 0000 000028D2      1609              CMP.W   #0,(SCOOUT)
00001D16  6700 000A               1610              BEQ     .MOVEMENTY
00001D1A  0479 0032 000028D2      1611              SUB.W  #POINTS,(SCOOUT)
00001D22  3039 000028BE           1612  .MOVEMENTY  MOVE.W  (MARTIMER),D0
00001D28  0800 0001               1613              BTST.L  #$1,D0
00001D2C  6E00 000C               1614              BGT     .NOMOVEY         
00001D30  3229 0002               1615              MOVE.W  2(A1),D1
00001D34  5241                    1616              ADD.W   #MARSPEDY,D1
00001D36                          1617              
00001D36                          1618  
00001D36                          1619              ; STORE POSITION
00001D36  3341 0002               1620              MOVE.W  D1,2(A1)
00001D3A                          1621              
00001D3A  3011                    1622  .NOMOVEY    MOVE.W  (A1),D0
00001D3C  323C 0280               1623              MOVE.W  #SCRWIDTH,D1      
00001D40  0640 0017               1624              ADD.W   #MARWIDTH/2,D0
00001D44  B041                    1625              CMP.W   D1,D0
00001D46  6D00 000A               1626              BLT     .CHKLEFT
00001D4A  4469 0004               1627              NEG.W   4(A1)
00001D4E                          1628  
00001D4E  6000 0016               1629              BRA     .CHKCOLL
00001D52  323C 0000               1630  .CHKLEFT    MOVE.W  #0,D1
00001D56  3011                    1631              MOVE.W  (A1),D0
00001D58  0440 0017               1632              SUB.W   #MARWIDTH/2,D0
00001D5C  B041                    1633              CMP.W   D1,D0
00001D5E  6E00 0052               1634              BGT     .DONE
00001D62  4469 0004               1635              NEG.W   4(A1)
00001D66                          1636  .CHKCOLL         
00001D66  303C 0002               1637              MOVE.W  #2,D0
00001D6A  4EB8 105A               1638              JSR     DMMFRSTO
00001D6E                          1639  .LOOP       
00001D6E  B1FC 00000000           1640              CMP.L   #0,A0
00001D74  6700 003C               1641              BEQ     .DONE 
00001D78  5088                    1642              ADD.L   #8,A0
00001D7A  3410                    1643              MOVE.W  (A0),D2
00001D7C  3211                    1644              MOVE.W  (A1),D1
00001D7E  B242                    1645              CMP.W   D2,D1
00001D80  6700 002A               1646              BEQ     .NEXT
00001D84  3428 0002               1647              MOVE.W  2(A0),D2
00001D88  3229 0002               1648              MOVE.W  2(A1),D1
00001D8C  0642 0017               1649              ADD.W   #MARHEIGH/2,D2
00001D90  B242                    1650              CMP.W   D2,D1
00001D92  6E00 0018               1651              BGT     .NEXT
00001D96  0442 002E               1652              SUB.W   #MARHEIGH,D2
00001D9A  B242                    1653              CMP.W   D2,D1
00001D9C  6D00 000E               1654              BLT     .NEXT
00001DA0  3429 0004               1655              MOVE.W  4(A1),D2
00001DA4  3142 0004               1656              MOVE.W   D2,4(A0)  
00001DA8  6000 0002               1657              BRA     .NEXT 
00001DAC                          1658  
00001DAC                          1659  
00001DAC  4EB8 107C               1660  .NEXT       JSR     DMMNEXTO
00001DB0  60BC                    1661              BRA     .LOOP            
00001DB2                          1662  .DONE       
00001DB2  3011                    1663              MOVE.W  (A1),D0
00001DB4  D069 0004               1664              ADD.W   4(A1),D0
00001DB8  3280                    1665  .END        MOVE.W  D0,(A1)
00001DBA                          1666  
00001DBA                          1667  ;.NOMOVEY
00001DBA  4C9F 0307               1668         MOVEM.W (A7)+,D0-D2/A0-A1
00001DBE                          1669  
00001DBE  4E75                    1670              RTS
00001DC0                          1671              
00001DC0                          1672  ; ------------------------------------------------------------------------------
00001DC0                          1673  MARPLOT
00001DC0                          1674  ; PLOT THE MARCIANO.
00001DC0                          1675  ; INPUT    : NONE 
00001DC0                          1676  ; OUTPUT   : NONE
00001DC0                          1677  ; MODIFIES : NONE
00001DC0                          1678  ; ------------------------------------------------------------------------------
00001DC0                          1679  
00001DC0  48E7 F800               1680              MOVEM.L D0-D4,-(A7)
00001DC4                          1681  
00001DC4                          1682  ; CIRCLE__________________________________
00001DC4                          1683  
00001DC4                          1684              ; SET PEN COLOR
00001DC4  103C 0050               1685              MOVE.B  #80,D0
00001DC8  223C 001111FF           1686              MOVE.L  #MCIRPCOL,D1
00001DCE  4E4F                    1687              TRAP    #15
00001DD0                          1688              
00001DD0                          1689              ; SET FILL COLOR
00001DD0  103C 0051               1690              MOVE.B  #81,D0
00001DD4  223C 000000AA           1691              MOVE.L  #MCIRFCOL,D1
00001DDA  4E4F                    1692              TRAP    #15
00001DDC                          1693              
00001DDC                          1694              ; DEFINE COORDINATES
00001DDC  3210                    1695              MOVE.W  (A0),D1
00001DDE  0441 000B               1696              SUB.W   #MARWIDTH/4,D1
00001DE2  3428 0002               1697              MOVE.W  2(A0),D2
00001DE6  0442 000B               1698              SUB.W   #MARHEIGH/4,D2
00001DEA  3610                    1699              MOVE.W  (A0),D3
00001DEC  0643 000B               1700              ADD.W   #MARWIDTH/4,D3
00001DF0  3828 0002               1701              MOVE.W  2(A0),D4
00001DF4  0644 000B               1702              ADD.W   #MARHEIGH/4,D4
00001DF8                          1703              
00001DF8                          1704              ; DRAW CIRCLE
00001DF8                          1705              
00001DF8  103C 0058               1706              MOVE.B  #88,D0
00001DFC  4E4F                    1707              TRAP    #15
00001DFE                          1708              
00001DFE                          1709  
00001DFE                          1710  ; LEFT RECTANGLE__________________________
00001DFE                          1711              
00001DFE                          1712              ; SET PEN COLOR
00001DFE  103C 0050               1713              MOVE.B  #80,D0
00001E02  223C 00800080           1714              MOVE.L  #MRECPCOL,D1
00001E08  4E4F                    1715              TRAP    #15
00001E0A                          1716              
00001E0A                          1717              ; SET FILL COLOR
00001E0A  103C 0051               1718              MOVE.B  #81,D0
00001E0E  223C 00800080           1719              MOVE.L  #MRECFCOL,D1
00001E14  4E4F                    1720              TRAP    #15
00001E16                          1721              
00001E16                          1722              ; DEFINE COORDINATES
00001E16  3210                    1723              MOVE.W  (A0),D1
00001E18  0441 0017               1724              SUB.W   #MARWIDTH/2,D1
00001E1C  3428 0002               1725              MOVE.W  2(A0),D2
00001E20  0442 0017               1726              SUB.W   #MARHEIGH/2,D2
00001E24  3610                    1727              MOVE.W  (A0),D3
00001E26  0443 000F               1728              SUB.W   #MARWIDTH/3,D3
00001E2A  3828 0002               1729              MOVE.W  2(A0),D4
00001E2E  0644 0017               1730              ADD.W   #MARHEIGH/2,D4
00001E32                          1731              
00001E32                          1732              ; DRAW LEFT RECTANGLE
00001E32                          1733              
00001E32  103C 0057               1734              MOVE.B  #87,D0
00001E36  4E4F                    1735              TRAP    #15
00001E38                          1736              
00001E38                          1737  ; RIGHT RECTANGLE_________________________
00001E38                          1738  
00001E38                          1739              ; SET PEN COLOR
00001E38  103C 0050               1740              MOVE.B  #80,D0
00001E3C  223C 00800080           1741              MOVE.L  #MRECPCOL,D1
00001E42  4E4F                    1742              TRAP    #15
00001E44                          1743              
00001E44                          1744              ; SET FILL COLOR
00001E44  103C 0051               1745              MOVE.B  #81,D0
00001E48  223C 00800080           1746              MOVE.L  #MRECFCOL,D1
00001E4E  4E4F                    1747              TRAP    #15
00001E50                          1748              
00001E50                          1749              ; DEFINE COORDINATES
00001E50  3210                    1750              MOVE.W  (A0),D1
00001E52  0641 000F               1751              ADD.W   #MARWIDTH/3,D1
00001E56  3428 0002               1752              MOVE.W  2(A0),D2
00001E5A  0442 0017               1753              SUB.W   #MARHEIGH/2,D2
00001E5E  3610                    1754              MOVE.W  (A0),D3
00001E60  0643 0017               1755              ADD.W   #MARWIDTH/2,D3
00001E64  3828 0002               1756              MOVE.W  2(A0),D4
00001E68  0644 0017               1757              ADD.W   #MARHEIGH/2,D4
00001E6C                          1758              
00001E6C                          1759              ; DRAW RIGHT RECTANGLE
00001E6C                          1760              
00001E6C  103C 0057               1761              MOVE.B  #87,D0
00001E70  4E4F                    1762              TRAP    #15
00001E72                          1763  
00001E72                          1764              
00001E72  4CDF 001F               1765              MOVEM.L (A7)+,D0-D4
00001E76                          1766  
00001E76  4E75                    1767              RTS
00001E78                          1768  
00001E78                          1769  ; ------------------------------------------------------------------------------
00001E78                          1770  RANDVEC
00001E78                          1771  ; PROVIDES RANDOM NUMBERS.
00001E78                          1772  ; INPUT    : NONE 
00001E78                          1773  ; OUTPUT   : NONE
00001E78                          1774  ; MODIFIES : NONE
00001E78                          1775  ; ------------------------------------------------------------------------------
00001E78                          1776  
00001E78= A2 EE 9A 0C F5 24 ...   1777              DC.B    162, 238, 154, 12 , 245, 36 , 32 , 103
00001E80= 2A A3 51 26 E0 AC ...   1778              DC.B    42 , 163, 81 , 38 , 224, 172, 19 , 69
00001E88= 75 51 CA FD 33 EB ...   1779              DC.B    117, 81 , 202, 253, 51 , 235, 108, 154
00001E90= 60 CC E7 B8 9A EB ...   1780              DC.B    96 , 204, 231, 184, 154, 235, 34 , 203
00001E98= 1D 76 B5 95 B0 89 ...   1781              DC.B    29 , 118, 181, 149, 176, 137, 62 , 108
00001EA0= 39 15 48 C9 6E CA ...   1782              DC.B    57 , 21 , 72 , 201, 110, 202, 159, 41
00001EA8= 43 E7 E2 7C 37 25 ...   1783              DC.B    67 , 231, 226, 124, 55 , 37 , 84 , 62
00001EB0= E9 94 CE E9 E4 52 ...   1784              DC.B    233, 148, 206, 233, 228, 82 , 243, 78
00001EB8= 37 6D 9A 84 A2 28 ...   1785              DC.B    55 , 109, 154, 132, 162, 40 , 30 , 39
00001EC0= 19 E2 C6 77 80 D4 ...   1786              DC.B    25 , 226, 198, 119, 128, 212, 232, 225
00001EC8= 0A 5A 32 67 33 C2 ...   1787              DC.B    10 , 90 , 50 , 103, 51 , 194, 222, 40
00001ED0= 59 80 DC 0E 57 FC ...   1788              DC.B    89 , 128, 220, 14 , 87 , 252, 243, 252
00001ED8= 8A AB BC F7 07 4D ...   1789              DC.B    138, 171, 188, 247, 7  , 77 , 29 , 234
00001EE0= EF D5 77 6E 1E BB ...   1790              DC.B    239, 213, 119, 110, 30 , 187, 131, 23
00001EE8= D6 E0 2A 8F BD 28 ...   1791              DC.B    214, 224, 42 , 143, 189, 40 , 212, 130
00001EF0= 13 4F 66 EC 0A 64 ...   1792              DC.B    19 , 79 , 102, 236, 10 , 100, 122, 188
00001EF8= 56 52 9A 16 9B 90 ...   1793              DC.B    86 , 82 , 154, 22 , 155, 144, 7  , 199
00001F00= 06 8A A4 F7 01 DA ...   1794              DC.B    6  , 138, 164, 247, 1  , 218, 166, 82
00001F08= F2 E7 77 28 B1 76 ...   1795              DC.B    242, 231, 119, 40 , 177, 118, 220, 102
00001F10= A4 42 E3 81 B1 67 ...   1796              DC.B    164, 66 , 227, 129, 177, 103, 165, 108
00001F18= BF CE FA 16 BF 38 ...   1797              DC.B    191, 206, 250, 22 , 191, 56 , 30 , 161
00001F20= D1 8B 50 0C 5F 49 ...   1798              DC.B    209, 139, 80 , 12 , 95 , 73 , 168, 56
00001F28= DE 4C 14 A2 40 DC ...   1799              DC.B    222, 76 , 20 , 162, 64 , 220, 93 , 12
00001F30= B6 9B 0A 38 5D AB ...   1800              DC.B    182, 155, 10 , 56 , 93 , 171, 89 , 6
00001F38= E2 1B DD 75 15 82 ...   1801              DC.B    226, 27 , 221, 117, 21 , 130, 101, 18
00001F40= 8A 26 51 30 9F 47 ...   1802              DC.B    138, 38 , 81 , 48 , 159, 71 , 57 , 21
00001F48= 1E 8A BB 71 C6 6E ...   1803              DC.B    30 , 138, 187, 113, 198, 110, 185, 152
00001F50= 9F 47 E5 34 94 27 ...   1804              DC.B    159, 71 , 229, 52 , 148, 39 , 77 , 6
00001F58= 7D 06 D6 BA 30 0F ...   1805              DC.B    125, 6  , 214, 186, 48 , 15 , 212, 22
00001F60= EC 7F 7E 03 CF 2D ...   1806              DC.B    236, 127, 126, 3  , 207, 45 , 193, 2
00001F68= 94 5B 23 F2 8B CD ...   1807              DC.B    148, 91 , 35 , 242, 139, 205, 248, 237
00001F70= 74 33 EC B9 0F D5 ...   1808              DC.B    116, 51 , 236, 185, 15 , 213, 221, 6
00001F78                          1809  
00001F78                          1810  
00001F78                          1811  -------------------- end include --------------------
00001F78                          1812              INCLUDE "SCORE.X68"
00001F78                          1813  ; ==============================================================================
00001F78                          1814  ; SCOREBOARD MANAGEMENT
00001F78                          1815  ; ==============================================================================
00001F78                          1816              
00001F78                          1817  ; ------------------------------------------------------------------------------
00001F78                          1818  SCOINIT
00001F78                          1819  ; INITIALIZE SCOREBOARD
00001F78                          1820  ; INPUT    : NONE 
00001F78                          1821  ; OUTPUT   : NONE
00001F78                          1822  ; MODIFIES : NONE
00001F78                          1823  ; ------------------------------------------------------------------------------
00001F78  4279 000028D2           1824              CLR.W   (SCOOUT)
00001F7E  4279 000028E4           1825              CLR.W   (FPS)
00001F84  4E75                    1826              RTS
00001F86                          1827              
00001F86                          1828  ; ------------------------------------------------------------------------------
00001F86                          1829  SCOPLOT
00001F86                          1830  ; PLOT THE SCOREBOARD
00001F86                          1831  ; INPUT    : NONE 
00001F86                          1832  ; OUTPUT   : NONE
00001F86                          1833  ; MODIFIES : NONE
00001F86                          1834  ; ------------------------------------------------------------------------------
00001F86                          1835  
00001F86  48E7 C040               1836              MOVEM.L D0-D1/A1,-(A7)
00001F8A                          1837  
00001F8A                          1838              ; SET BACKGROUND COLOR
00001F8A  103C 0051               1839              MOVE.B  #81,D0
00001F8E  7200                    1840              MOVE.L  #SCOFCOL,D1
00001F90  4E4F                    1841              TRAP    #15
00001F92                          1842              
00001F92                          1843              ; SET FIRST LINE POSITION
00001F92  103C 000B               1844              MOVE.B  #11,D0
00001F96  323C 4201               1845              MOVE.W  #SCOLINE1,D1
00001F9A  4E4F                    1846              TRAP    #15
00001F9C                          1847  
00001F9C                          1848              ; PRINT FIRST LINE
00001F9C  43F9 00001FF0           1849              LEA     .TXT1,A1
00001FA2  4281                    1850              CLR.L   D1
00001FA4  323C 0032               1851              MOVE.W  #SCRFPS,D1
00001FA8  103C 0011               1852              MOVE.B  #17,D0
00001FAC  4E4F                    1853              TRAP    #15
00001FAE                          1854  
00001FAE                          1855              ; SET SECOND LINE POSITION
00001FAE  103C 000B               1856              MOVE.B  #11,D0
00001FB2  323C 4202               1857              MOVE.W  #SCOLINE2,D1
00001FB6  4E4F                    1858              TRAP    #15
00001FB8                          1859  
00001FB8                          1860              ; PRINT SECOND LINE
00001FB8  43F9 00001FFD           1861              LEA     .TXT2,A1
00001FBE  4281                    1862              CLR.L   D1
00001FC0  3239 000028E4           1863              MOVE.W  (FPS),D1
00001FC6  103C 0011               1864              MOVE.B  #17,D0
00001FCA  4E4F                    1865              TRAP    #15
00001FCC                          1866              
00001FCC                          1867              ; SET SECOND LINE POSITION
00001FCC  103C 000B               1868              MOVE.B  #11,D0
00001FD0  323C 0101               1869              MOVE.W  #SCOLINE3,D1
00001FD4  4E4F                    1870              TRAP    #15
00001FD6                          1871  
00001FD6                          1872              ; PRINT SECOND LINE
00001FD6  43F9 0000200A           1873              LEA     .TXT3,A1
00001FDC  4281                    1874              CLR.L   D1
00001FDE  3239 000028D2           1875              MOVE.W  (SCOOUT),D1
00001FE4  103C 0011               1876              MOVE.B  #17,D0
00001FE8  4E4F                    1877              TRAP    #15
00001FEA                          1878  
00001FEA                          1879              
00001FEA  4CDF 0203               1880              MOVEM.L (A7)+,D0-D1/A1
00001FEE                          1881              
00001FEE  4E75                    1882              RTS
00001FF0= 4D 41 58 20 46 50 ...   1883  .TXT1       DC.B    'MAX FPS    :',0
00001FFD= 46 50 53 20 20 20 ...   1884  .TXT2       DC.B    'FPS        :',0
0000200A= 5055 4E54 5541 4...     1885  .TXT3       DC.W    'PUNTUACION :',0
00002018                          1886  
00002018                          1887  -------------------- end include --------------------
00002018                          1888              INCLUDE "GAME.X68"
00002018                          1889  ; ==============================================================================
00002018                          1890  ; GAME MANAGEMENT
00002018                          1891  ; ==============================================================================
00002018                          1892  
00002018                          1893  ; ------------------------------------------------------------------------------
00002018                          1894  GAMINIT
00002018                          1895  ; INITIALIZES GAME.
00002018                          1896  ; INPUT    : NONE
00002018                          1897  ; OUTPUT   : NONE
00002018                          1898  ; MODIFIES : NONE
00002018                          1899  ; ------------------------------------------------------------------------------
00002018  4EB8 1000               1900              JSR     DMMINIT
0000201C  4EB8 1456               1901              JSR     SHIPINIT
00002020  6000 FF56               1902              BRA     SCOINIT
00002024                          1903  
00002024                          1904  ; ------------------------------------------------------------------------------
00002024                          1905  GAMUPD
00002024                          1906  ; UPDATES THE GAME
00002024                          1907  ; INPUT    : NONE
00002024                          1908  ; OUTPUT   : NONE
00002024                          1909  ; MODIFIES : NONE
00002024                          1910  ; ------------------------------------------------------------------------------
00002024  48E7 FF70               1911              MOVEM.L D0-D7/A1-A3,-(A7)
00002028                          1912              ; LIMITATES THE SHOOTS PER SECOND
00002028  0C79 0010 000028B0      1913              CMP.W  #SHOTWAIT,(SHOTIMER)
00002030  6D00 002E               1914              BLT     .GOUPD
00002034                          1915              ; CHECK SHOOTS KEYBOARD
00002034  0839 0004 000028E3      1916              BTST.B  #4,(KBDEDGE)
0000203C  6700 0022               1917              BEQ     .GOUPD
00002040  1E3C 0002               1918              MOVE.B  #2,D7
00002044  4E42                    1919              TRAP    #2
00002046                          1920              ; INICIALIZE PARAMETERS FOR AGENTS SHOOT
00002046  43F8 195A               1921              LEA     SHOTINIT,A1
0000204A  45F8 1984               1922              LEA     SHOTUPD,A2
0000204E  47F8 1A70               1923              LEA     SHOTPLOT,A3
00002052  303C 0001               1924              MOVE.W  #1,D0
00002056  4279 000028B0           1925              CLR.W   (SHOTIMER)
0000205C  4EB8 128C               1926              JSR     AGLADD
00002060                          1927  .GOUPD    
00002060  0C79 001F 000028BC      1928              CMP.W   #31,(MAXMAR)
00002068  6E00 005A               1929              BGT     .CONTINU
0000206C  3C39 000028BA           1930              MOVE.W  (NUMMAR),D6
00002072                          1931              ; CHECK ROW CREATION TIMER
00002072  3039 000028C2           1932              MOVE.W  (ROWTIMER),D0
00002078  0C79 00A0 000028C2      1933              CMP.W   #$A0,(ROWTIMER)
00002080  6D00 0042               1934              BLT     .CONTINU
00002084                          1935              
00002084  4279 000028C2           1936  .GENLOOP    CLR.W   (ROWTIMER)
0000208A  43F8 1C1A               1937              LEA     MARINIT,A1
0000208E  45F8 1C3C               1938              LEA     MARUPD,A2
00002092  47F8 1DC0               1939              LEA     MARPLOT,A3
00002096  303C 0002               1940              MOVE.W  #2,D0
0000209A  3E3C 0001               1941              MOVE.W  #1,D7
0000209E  4EB8 128C               1942              JSR     AGLADD
000020A2  0679 002E 000028B8      1943              ADD.W   #MARWIDTH,(SUMMAR)
000020AA  0679 0017 000028B8      1944              ADD.W   #MARWIDTH/2,(SUMMAR)
000020B2  5279 000028BC           1945              ADDQ.W  #1,(MAXMAR)
000020B8  51CE FFCA               1946              DBRA    D6,.GENLOOP
000020BC  33FC 004F 000028B8      1947              MOVE.W  #$4F,(SUMMAR)
000020C4                          1948  
000020C4                          1949  
000020C4  4EB8 12A6               1950  .CONTINU    JSR     AGLUPD
000020C8  4EB8 1468               1951              JSR     SHIPUPD
000020CC  0C79 0000 000028D0      1952              CMP.W  #0,(LIFES)
000020D4  6600 0024               1953              BNE    .DONE
000020D8  33FC 0004 000028D6      1954              MOVE.W #4,(STANEXT)
000020E0  33FC 0003 000028D0      1955              MOVE.W #3,(LIFES)
000020E8  4279 000028CE           1956              CLR.W  (LENGLIFE)
000020EE  4279 000028BC           1957              CLR.W  (MAXMAR)
000020F4  4279 000028C6           1958              CLR.W  (MAXSHTMA)
000020FA                          1959  
000020FA  4CDF 0EFF               1960  .DONE       MOVEM.L (A7)+,D0-D7/A1-A3
000020FE  4E75                    1961              RTS
00002100                          1962  
00002100                          1963  ; ------------------------------------------------------------------------------
00002100                          1964  GAMPLOT
00002100                          1965  ; PLOTS THE GAME
00002100                          1966  ; INPUT    : NONE
00002100                          1967  ; OUTPUT   : NONE
00002100                          1968  ; MODIFIES : NONE
00002100                          1969  ; ------------------------------------------------------------------------------
00002100  4EB8 12CA               1970              JSR     AGLPLOT
00002104  4EB8 1F86               1971              JSR     SCOPLOT
00002108  6000 F5A2               1972              BRA     SHIPPLOT
0000210C                          1973  
0000210C                          1974  
0000210C                          1975  -------------------- end include --------------------
0000210C                          1976              INCLUDE "INTRO.X68"
0000210C                          1977  ; ==============================================================================
0000210C                          1978  ; INTRO SCREEN
0000210C                          1979  ; ==============================================================================
0000210C                          1980  
0000210C                          1981  ; ------------------------------------------------------------------------------
0000210C                          1982  ISCINIT
0000210C                          1983  ; INTRO SCREEN INIT
0000210C                          1984  ; INPUT    : NONE
0000210C                          1985  ; OUTPUT   : NONE
0000210C                          1986  ; MODIFIES : NONE
0000210C                          1987  ; ------------------------------------------------------------------------------
0000210C  4279 000028E8           1988              CLR.W   (ISCTIMER)
00002112  4EB9 00002556           1989              JSR     BUTINIT
00002118  4E75                    1990              RTS
0000211A                          1991  
0000211A                          1992  ; ------------------------------------------------------------------------------
0000211A                          1993  ISCUPD
0000211A                          1994  ; INTRO SCREEN UPDATE
0000211A                          1995  ; INPUT    : NONE
0000211A                          1996  ; OUTPUT   : NONE
0000211A                          1997  ; MODIFIES : NONE
0000211A                          1998  ; ------------------------------------------------------------------------------
0000211A  4EB9 0000257E           1999              JSR     BUTUPD
00002120  0839 0004 000028E3      2000              BTST.B  #4,(KBDEDGE)
00002128  6700 000A               2001              BEQ     .CONT
0000212C  33FC 0001 000028D6      2002              MOVE.W  #1,(STANEXT)
00002134  5279 000028E8           2003  .CONT       ADDQ.W  #1,(ISCTIMER)
0000213A  0C79 01F4 000028E8      2004              CMP.W   #ISCMAXTM,(ISCTIMER)
00002142  6D00 000A               2005              BLT     .DONE
00002146  33FC 0001 000028D6      2006              MOVE.W  #1,(STANEXT)
0000214E  4E75                    2007  .DONE       RTS
00002150                          2008  
00002150                          2009  ; ------------------------------------------------------------------------------
00002150                          2010  ISCPLOT
00002150                          2011  ; INTRO SCREEN PLOT
00002150                          2012  ; INPUT    : NONE
00002150                          2013  ; OUTPUT   : NONE
00002150                          2014  ; MODIFIES : NONE
00002150                          2015  ; ------------------------------------------------------------------------------
00002150  48E7 C080               2016              MOVEM.L D0-D1/A0,-(A7)
00002154  4EB9 000026C4           2017              JSR     BUTPLOT
0000215A                          2018  
0000215A  4281                    2019              CLR.L   D1
0000215C  103C 0051               2020              MOVE.B  #81,D0
00002160  4E4F                    2021              TRAP    #15
00002162                          2022              
00002162  41F9 00002176           2023              LEA     .TXT1,A0
00002168  103C 000A               2024              MOVE.B  #10,D0
0000216C  4EB8 1306               2025              JSR     UTLPRINT
00002170                          2026                          
00002170  4CDF 0103               2027              MOVEM.L (A7)+,D0-D1/A0
00002174                          2028  
00002174  4E75                    2029              RTS
00002176= 4D 41 52 43 49 41 ...   2030  .TXT1       DC.B    'MARCIANOS 68K',0
00002184                          2031              DS.W    0
00002184                          2032  
00002184                          2033  -------------------- end include --------------------
00002184                          2034              INCLUDE "INSTRUCTIONS.X68"
00002184                          2035  ; ==============================================================================
00002184                          2036  ; INSTRUCTIONS SCREEN
00002184                          2037  ; ==============================================================================
00002184                          2038  
00002184                          2039  ; ------------------------------------------------------------------------------
00002184                          2040  INSINIT
00002184                          2041  ; INSTRUCTIONS SCREEN INIT
00002184                          2042  ; INPUT    : NONE
00002184                          2043  ; OUTPUT   : NONE
00002184                          2044  ; MODIFIES : NONE
00002184                          2045  ; ------------------------------------------------------------------------------
00002184  4E75                    2046              RTS
00002186                          2047  
00002186                          2048  ; ------------------------------------------------------------------------------
00002186                          2049  INSUPD
00002186                          2050  ; INSTRUCTIONS SCREEN UPDATE
00002186                          2051  ; INPUT    : NONE
00002186                          2052  ; OUTPUT   : NONE
00002186                          2053  ; MODIFIES : NONE
00002186                          2054  ; ------------------------------------------------------------------------------
00002186  0839 0004 000028E3      2055              BTST.B  #4,(KBDEDGE)
0000218E  6700 000A               2056              BEQ     .CONT
00002192  33FC 0002 000028D6      2057              MOVE.W  #2,(STANEXT)
0000219A  5279 000028E8           2058  .CONT       ADDQ.W  #1,(ISCTIMER)
000021A0  0C79 03E8 000028E8      2059              CMP.W   #INSMAXTM,(ISCTIMER)
000021A8  6D00 000A               2060              BLT     .DONE
000021AC  33FC 0002 000028D6      2061              MOVE.W  #2,(STANEXT)
000021B4  4E75                    2062  .DONE       RTS
000021B6                          2063  
000021B6                          2064  
000021B6                          2065  ; ------------------------------------------------------------------------------
000021B6                          2066  INSPLOT
000021B6                          2067  ; INSTRUCTIONS SCREEN PLOT
000021B6                          2068  ; INPUT    : NONE
000021B6                          2069  ; OUTPUT   : NONE
000021B6                          2070  ; MODIFIES : NONE
000021B6                          2071  ; ------------------------------------------------------------------------------
000021B6                          2072  
000021B6  48E7 C0C0               2073              MOVEM.L D0-D1/A0-A1,-(A7)
000021BA  103C 000B               2074              MOVE.B  #11,D0
000021BE  43F9 000023A6           2075              LEA     .TXTLST,A1
000021C4  2219                    2076  .LOOP       MOVE.L  (A1)+,D1
000021C6  6700 000A               2077              BEQ     .PARP
000021CA  2041                    2078              MOVE.L  D1,A0
000021CC  4EB8 1306               2079              JSR     UTLPRINT
000021D0  60F2                    2080              BRA     .LOOP
000021D2                          2081              
000021D2  0839 0004 000028EC      2082  .PARP       BTST.B  #4,(SCRINTCY)
000021DA  6700 0010               2083              BEQ     .DONE
000021DE                          2084              
000021DE  41F9 00002393           2085              LEA     .TXT12,A0
000021E4  103C 0020               2086              MOVE.B  #32,D0
000021E8  4EB8 1306               2087              JSR     UTLPRINT
000021EC                          2088              
000021EC  4CDF 0303               2089  .DONE       MOVEM.L (A7)+,D0-D1/A0-A1
000021F0  4E75                    2090              RTS
000021F2                          2091              
000021F2= 57 45 4C 43 4F 4D ...   2092  .TXT1       DC.B    'WELCOME TO THE MARCIANOS 68K!',0
00002210= 59 4F 55 52 20 47 ...   2093  .TXT2       DC.B    'YOUR GOAL IN THIS GAME IS TO KILL THE MOST ALIENS THAT YOU CAN',0
0000224F= 54 4F 20 54 48 49 ...   2094  .TXT3       DC.B    'TO THIS GOAL, MOVE YOUR SHIP USING THE KEYBOARD',0
0000227F= 48 4F 57 20 54 4F ...   2095  .TXT4       DC.B    'HOW TO DO IT? YOU MAY ASK.',0
0000229A= 49 54 20 49 53 20 ...   2096  .TXT5       DC.B    'IT IS EASY: JUST USE THE UP KEY TO MOVE THE SHIP...',0
000022CE= 55 50 21 00             2097  .TXT6       DC.B    'UP!',0
000022D2= 41 4E 44 20 55 53 ...   2098  .TXT7       DC.B    'AND USE THE DONW KEY TO MOVE THE SHIP DOWN.',0
000022FE= 57 48 41 54 20 41 ...   2099  .TXT8       DC.B    'WHAT ABOUT LEFT AND RIGHT?',0
00002319= 59 45 41 48 2E 20 ...   2100  .TXT9       DC.B    'YEAH. THESE ARE USED TO HORIZONTAL DIRECTIONS',0
00002347= 41 4E 44 20 48 4F ...   2101  .TXT10      DC.B    'AND HOW CAN YOU KILL THEM?',0
00002362= 45 41 53 59 20 4A ...   2102  .TXT11      DC.B    'EASY JUST JUST WITH THE KEY "X" ON YOUR KEYBOARD',0
00002393= 50 52 45 53 53 20 ...   2103  .TXT12      DC.B    'PRESS "X" TO START',0
000023A6                          2104              DS.W    0
000023A6= 000021F2 00002210 ...   2105  .TXTLST     DC.L    .TXT1,.TXT2,.TXT3,.TXT4,.TXT5,.TXT6,.TXT7,.TXT8,.TXT9,.TXT10,.TXT11,0
000023D6                          2106  
000023D6                          2107  
000023D6                          2108  
000023D6                          2109  -------------------- end include --------------------
000023D6                          2110              INCLUDE "WIN.X68"
000023D6                          2111  ; ==============================================================================
000023D6                          2112  ; VICTORY SCREEN
000023D6                          2113  ; ==============================================================================
000023D6                          2114  
000023D6                          2115  ; ------------------------------------------------------------------------------
000023D6                          2116  WINUPD
000023D6                          2117  ; VICTORY SCREEN UPDATE
000023D6                          2118  ; INPUT    : NONE
000023D6                          2119  ; OUTPUT   : NONE
000023D6                          2120  ; MODIFIES : NONE
000023D6                          2121  ; ------------------------------------------------------------------------------
000023D6  0839 0004 000028E3      2122              BTST.B  #4,(KBDEDGE)
000023DE  6700 0008               2123              BEQ     .CONT
000023E2  4279 000028D6           2124              CLR.W   (STANEXT)
000023E8  4E75                    2125  .CONT       RTS
000023EA                          2126  
000023EA                          2127  ; ------------------------------------------------------------------------------
000023EA                          2128  WINPLOT
000023EA                          2129  ; VICTORY SCREEN PLOT
000023EA                          2130  ; INPUT    : NONE
000023EA                          2131  ; OUTPUT   : NONE
000023EA                          2132  ; MODIFIES : NONE
000023EA                          2133  ; ------------------------------------------------------------------------------
000023EA  48E7 C080               2134              MOVEM.L D0-D1/A0,-(A7)
000023EE                          2135              
000023EE  4281                    2136              CLR.L   D1
000023F0  103C 0051               2137              MOVE.B  #81,D0
000023F4  4E4F                    2138              TRAP    #15
000023F6                          2139              
000023F6  41F9 00002424           2140              LEA     .TXT1,A0
000023FC  103C 000A               2141              MOVE.B  #10,D0
00002400  4EB8 1306               2142              JSR     UTLPRINT
00002404                          2143              
00002404  0839 0004 000028EC      2144              BTST.B  #4,(SCRINTCY)
0000240C  6700 0010               2145              BEQ     .DONE
00002410                          2146              
00002410  41F9 0000242D           2147              LEA     .TXT2,A0
00002416  103C 0019               2148              MOVE.B  #25,D0
0000241A  4EB8 1306               2149              JSR     UTLPRINT
0000241E                          2150              
0000241E  4CDF 0103               2151  .DONE       MOVEM.L (A7)+,D0-D1/A0
00002422                          2152  
00002422  4E75                    2153              RTS
00002424= 59 4F 55 20 57 4F ...   2154  .TXT1       DC.B    'YOU WON!',0
0000242D= 50 52 45 53 53 20 ...   2155  .TXT2       DC.B    'PRESS FIRE1 TO CONTINUE',0
00002446                          2156              DS.W    0
00002446                          2157  
00002446                          2158  -------------------- end include --------------------
00002446                          2159              INCLUDE "GOVER.X68"
00002446                          2160  ; ==============================================================================
00002446                          2161  ; GAME OVER SCREEN
00002446                          2162  ; ==============================================================================
00002446                          2163  
00002446                          2164  ; ------------------------------------------------------------------------------
00002446                          2165  GOVUPD
00002446                          2166  ; GAME OVER SCREEN UPDATE
00002446                          2167  ; INPUT    : NONE
00002446                          2168  ; OUTPUT   : NONE
00002446                          2169  ; MODIFIES : NONE
00002446                          2170  ; ------------------------------------------------------------------------------
00002446  0839 0004 000028E3      2171              BTST.B  #4,(KBDEDGE)
0000244E  6700 0008               2172              BEQ     .CONT
00002452  4279 000028D6           2173              CLR.W   (STANEXT)
00002458  4E75                    2174  .CONT       RTS
0000245A                          2175  
0000245A                          2176  ; ------------------------------------------------------------------------------
0000245A                          2177  GOVPLOT
0000245A                          2178  ; GAME OVER SCREEN PLOT
0000245A                          2179  ; INPUT    : NONE
0000245A                          2180  ; OUTPUT   : NONE
0000245A                          2181  ; MODIFIES : NONE
0000245A                          2182  ; ------------------------------------------------------------------------------
0000245A  48E7 C080               2183              MOVEM.L D0-D1/A0,-(A7)
0000245E                          2184              
0000245E  4281                    2185              CLR.L   D1
00002460  103C 0051               2186              MOVE.B  #81,D0
00002464  4E4F                    2187              TRAP    #15
00002466                          2188              
00002466  41F9 000024A2           2189              LEA     .TXT1,A0
0000246C  103C 000A               2190              MOVE.B  #10,D0
00002470  4EB8 1306               2191              JSR     UTLPRINT
00002474                          2192              
00002474  41F9 000024AC           2193              LEA     .TXT2,A0
0000247A  103C 0012               2194              MOVE.B  #18,D0
0000247E  4EB8 1306               2195              JSR     UTLPRINT
00002482                          2196  
00002482                          2197              
00002482  0839 0004 000028EC      2198              BTST.B  #4,(SCRINTCY)
0000248A  6700 0010               2199              BEQ     .DONE
0000248E                          2200              
0000248E  41F9 000024BD           2201              LEA     .TXT3,A0
00002494  103C 0019               2202              MOVE.B  #25,D0
00002498  4EB8 1306               2203              JSR     UTLPRINT
0000249C                          2204              
0000249C  4CDF 0103               2205  .DONE       MOVEM.L (A7)+,D0-D1/A0
000024A0                          2206  
000024A0  4E75                    2207              RTS
000024A2= 47 41 4D 45 20 4F ...   2208  .TXT1       DC.B    'GAME OVER',0
000024AC= 42 45 54 54 45 52 ...   2209  .TXT2       DC.B    'BETTER NEXT TIME',0
000024BD= 50 52 45 53 53 20 ...   2210  .TXT3       DC.B    'PRESS "X" TO CONTINUE',0
000024D4                          2211              DS.W    0
000024D4                          2212  
000024D4                          2213  -------------------- end include --------------------
000024D4                          2214              INCLUDE "MOUSE.X68"
000024D4                          2215  ; ==============================================================================
000024D4                          2216  ; MOUSE
000024D4                          2217  ; ==============================================================================
000024D4                          2218  
000024D4                          2219  ; ------------------------------------------------------------------------------
000024D4                          2220  MOINIT
000024D4                          2221  ; MOUSE INIT
000024D4                          2222  ; INPUT    : NONE
000024D4                          2223  ; OUTPUT   : NONE
000024D4                          2224  ; MODIFIES : NONE
000024D4                          2225  ; ------------------------------------------------------------------------------
000024D4  48E7 C0C0               2226              MOVEM.L D0-D1/A0-A1,-(A7)
000024D8  323C 0101               2227              MOVE.W  #$0101,D1
000024DC  103C 003C               2228              MOVE.B  #60,D0
000024E0  4E4F                    2229              TRAP    #15
000024E2  7000                    2230              MOVEQ   #0,D0
000024E4  33C0 000028D8           2231              MOVE.W  D0,(BUTTON_R)
000024EA  33C0 000028DA           2232              MOVE.W  D0,(BUTTON_L)
000024F0  4CDF 0303               2233              MOVEM.L (A7)+,D0-D1/A0-A1
000024F4                          2234  
000024F4  4E75                    2235              RTS
000024F6                          2236  ; ------------------------------------------------------------------------------
000024F6                          2237  MOINTE
000024F6                          2238  ; MOUSE UPDATE
000024F6                          2239  ; INPUT    : NONE
000024F6                          2240  ; OUTPUT   : NONE
000024F6                          2241  ; MODIFIES : NONE
000024F6                          2242  ; ------------------------------------------------------------------------------                
000024F6                          2243              ; MOUSE READ
000024F6  48E7 C000               2244              MOVEM.L D0-D1,-(A7)
000024FA  7200                    2245              MOVEQ   #0,D1
000024FC  103C 003D               2246              MOVE.B  #61,D0
00002500  4E4F                    2247              TRAP    #15
00002502  33FC 0000 000028DA      2248              MOVE.W  #0,(BUTTON_L)
0000250A  33FC 0000 000028D8      2249              MOVE.W  #0,(BUTTON_R)
00002512  7201                    2250              MOVEQ   #1,D1
00002514  0800 0000               2251              BTST    #0,D0
00002518  6700 0008               2252              BEQ     NOT_LEFT
0000251C  33C1 000028DA           2253              MOVE.W  D1,(BUTTON_L)
00002522                          2254              
00002522                          2255  NOT_LEFT    
00002522  0800 0001               2256              BTST    #1,D0
00002526  6700 0008               2257              BEQ     NOT_RIGHT
0000252A  33C1 000028D8           2258              MOVE.W  D1,(BUTTON_R)
00002530                          2259  NOT_RIGHT   
00002530                          2260              
00002530  4CDF 0003               2261              MOVEM.L (A7)+,D0-D1
00002534  4E75                    2262              RTS
00002536                          2263  MOMOVE      
00002536  48E7 C0C0               2264              MOVEM.L D0-D1/A0-A1,-(A7)
0000253A  7200                    2265              MOVEQ   #0,D1
0000253C  103C 003D               2266              MOVE.B  #61,D0
00002540  4E4F                    2267              TRAP    #15
00002542                          2268              
00002542  33C1 000028DC           2269              MOVE.W  D1,(MOUSEX)
00002548  4841                    2270              SWAP    D1
0000254A                          2271              
0000254A  33C1 000028DE           2272              MOVE.W  D1,(MOUSEY)
00002550  4CDF 0303               2273              MOVEM.L (A7)+,D0-D1/A0-A1
00002554                          2274  
00002554  4E75                    2275              RTS
00002556                          2276  
00002556                          2277  
00002556                          2278  -------------------- end include --------------------
00002556                          2279              INCLUDE "BUTTON.X68"
00002556                          2280  ; ==============================================================================
00002556                          2281  ; BUTTON MANAGEMENT
00002556                          2282  ; ==============================================================================
00002556                          2283              
00002556                          2284  ; ------------------------------------------------------------------------------
00002556                          2285  BUTINIT
00002556                          2286  ; INITIALIZE SHIP.
00002556                          2287  ; INPUT    : NONE 
00002556                          2288  ; OUTPUT   : NONE
00002556                          2289  ; MODIFIES : NONE
00002556                          2290  ; ------------------------------------------------------------------------------
00002556  33FC 0000 0000289C      2291              MOVE.W  #0,(TOUCHED)     
0000255E  23FC 00000000 0000289E  2292              MOVE.L  #0,(BUTCOL1)
00002568  23FC 00000000 000028A2  2293              MOVE.L  #0,(BUTCOL2)
00002572  23FC 00000000 000028A6  2294              MOVE.L  #0,(BUTCOL3)       
0000257C  4E75                    2295              RTS
0000257E                          2296              
0000257E                          2297  ; ------------------------------------------------------------------------------
0000257E                          2298  BUTUPD
0000257E                          2299  ; UPDATES THE BUTTONS.
0000257E                          2300  ; INPUT    : NONE 
0000257E                          2301  ; OUTPUT   : NONE
0000257E                          2302  ; MODIFIES : NONE
0000257E                          2303  ; ------------------------------------------------------------------------------
0000257E                          2304              
0000257E                          2305              ; CHEKS IF THE MOUSE IS ON A BUTTON
0000257E  48E7 C000               2306              MOVEM.L D0-D1,-(A7)
00002582  3039 000028DC           2307              MOVE.W  (MOUSEX),D0
00002588  323C 0140               2308              MOVE.W  #SCRWIDTH/2,D1
0000258C  0441 003E               2309              SUB.W   #BUTWIDTH/2,D1
00002590  B041                    2310              CMP.W   D1,D0
00002592  6D00 010C               2311              BLT     .RESTORE
00002596  0641 007D               2312              ADD.W   #BUTWIDTH,D1
0000259A  B041                    2313              CMP.W   D1,D0
0000259C  6E00 0102               2314              BGT     .RESTORE
000025A0  3039 000028DE           2315              MOVE.W  (MOUSEY),D0
000025A6                          2316  
000025A6                          2317              ; CHKBUT1
000025A6  323C 00CD               2318              MOVE.W  #BUTPOSY1,D1
000025AA  B041                    2319              CMP.W   D1,D0
000025AC  6D00 004C               2320              BLT     .CHKBUT2
000025B0  0641 0032               2321              ADD.W   #BUTHEIGH,D1
000025B4  B041                    2322              CMP.W   D1,D0
000025B6  6E00 0042               2323              BGT     .CHKBUT2
000025BA  23FC 00000FFF 0000289E  2324              MOVE.L  #$00000FFF,(BUTCOL1)
000025C4  23FC 00000000 000028A6  2325              MOVE.L  #0,(BUTCOL3)
000025CE  23FC 00000000 000028A2  2326              MOVE.L  #0,(BUTCOL2)
000025D8                          2327  
000025D8  3239 000028DA           2328              MOVE.W  (BUTTON_L),D1
000025DE  B27C 0001               2329              CMP.W   #1,D1
000025E2  6600 00DA               2330              BNE     .EXIT
000025E6  33FC 0002 000028D6      2331              MOVE.W  #2,(STANEXT)
000025EE  33FC 0000 000028DA      2332              MOVE.W   #0,(BUTTON_L)
000025F6  6000 00C6               2333              BRA     .EXIT
000025FA                          2334  
000025FA                          2335  .CHKBUT2    
000025FA  323C 0118               2336              MOVE.W  #BUTPOSY2,D1
000025FE  B041                    2337              CMP.W   D1,D0
00002600  6D00 004C               2338              BLT     .CHKBUT3
00002604  0641 0032               2339              ADD.W   #BUTHEIGH,D1
00002608  B041                    2340              CMP.W   D1,D0
0000260A  6E00 0042               2341              BGT     .CHKBUT3
0000260E  23FC 00000FFF 000028A2  2342              MOVE.L  #$00000FFF,(BUTCOL2)
00002618  23FC 00000000 000028A6  2343              MOVE.L  #0,(BUTCOL3)
00002622  23FC 00000000 0000289E  2344              MOVE.L  #0,(BUTCOL1)
0000262C  3239 000028DA           2345              MOVE.W  (BUTTON_L),D1
00002632  B27C 0001               2346              CMP.W   #1,D1
00002636  6600 0086               2347              BNE     .EXIT
0000263A  33FC 0001 000028D6      2348              MOVE.W  #1,(STANEXT)
00002642  33FC 0000 000028DA      2349              MOVE.W   #0,(BUTTON_L)
0000264A  6000 0072               2350              BRA     .EXIT
0000264E                          2351  .CHKBUT3    
0000264E  323C 0163               2352              MOVE.W  #BUTPOSY3,D1
00002652  B041                    2353              CMP.W   D1,D0
00002654  6D00 004A               2354              BLT     .RESTORE
00002658  0641 0032               2355              ADD.W   #BUTHEIGH,D1
0000265C  B041                    2356              CMP.W   D1,D0
0000265E  6E00 0040               2357              BGT     .RESTORE
00002662  23FC 00000FFF 000028A6  2358              MOVE.L  #$00000FFF,(BUTCOL3)
0000266C  23FC 00000000 0000289E  2359              MOVE.L  #0,(BUTCOL1)
00002676  23FC 00000000 000028A2  2360              MOVE.L  #0,(BUTCOL2)
00002680  3239 000028DA           2361              MOVE.W  (BUTTON_L),D1
00002686  B27C 0001               2362              CMP.W   #1,D1
0000268A  6600 0032               2363              BNE     .EXIT
0000268E  103C 0021               2364              MOVE.B  #33,D0
00002692  7200                    2365              MOVE.L  #0,D1
00002694  4E4F                    2366              TRAP    #15
00002696  4E40                    2367              TRAP    #0
00002698  FFFF FFFF               2368              SIMHALT
0000269C  6000 0020               2369              BRA     .EXIT
000026A0                          2370  .RESTORE
000026A0  23FC 00000000 0000289E  2371              MOVE.L  #0,(BUTCOL1)
000026AA  23FC 00000000 000028A2  2372              MOVE.L  #0,(BUTCOL2)
000026B4  23FC 00000000 000028A6  2373              MOVE.L  #0,(BUTCOL3)
000026BE                          2374   
000026BE  4CDF 0003               2375  .EXIT       MOVEM.L  (A7)+,D0-D1
000026C2                          2376  
000026C2  4E75                    2377              RTS
000026C4                          2378              
000026C4                          2379  ; ------------------------------------------------------------------------------
000026C4                          2380  BUTPLOT
000026C4                          2381  ; PLOT THE SHIP.
000026C4                          2382  ; INPUT    : NONE 
000026C4                          2383  ; OUTPUT   : NONE
000026C4                          2384  ; MODIFIES : NONE
000026C4                          2385  ; ------------------------------------------------------------------------------
000026C4                          2386  
000026C4  48E7 F800               2387              MOVEM.L D0-D4/D1-D2,-(A7)
000026C8                          2388  
000026C8                          2389              
000026C8                          2390  ; BUTCOL1__________________________
000026C8                          2391  
000026C8                          2392              ; SET CONTOUR COLOR
000026C8  103C 0050               2393              MOVE.B  #80,D0
000026CC  223C 00FFFF00           2394              MOVE.L  #MOTPCOL,D1
000026D2  4E4F                    2395              TRAP    #15
000026D4                          2396              
000026D4                          2397              ; SET FILL COLOR
000026D4  103C 0051               2398              MOVE.B  #81,D0
000026D8  2239 0000289E           2399              MOVE.L  (BUTCOL1),D1
000026DE  4E4F                    2400              TRAP    #15
000026E0                          2401              
000026E0                          2402              ; DEFINE COORDINATES
000026E0  323C 0140               2403              MOVE.W  #SCRWIDTH/2,D1
000026E4  0441 003E               2404              SUB.W   #BUTWIDTH/2,D1
000026E8  343C 00CD               2405              MOVE.W  #BUTPOSY1,D2
000026EC  363C 0140               2406              MOVE.W  #SCRWIDTH/2,D3
000026F0  0643 003E               2407              ADD.W   #BUTWIDTH/2,D3
000026F4  3802                    2408              MOVE.W  D2,D4
000026F6  0644 0032               2409              ADD.W   #BUTHEIGH,D4
000026FA                          2410                        
000026FA                          2411              ; DRAW RECTANGLE
000026FA  103C 0057               2412              MOVE.B  #87,D0
000026FE  4E4F                    2413              TRAP    #15
00002700                          2414              
00002700  41F9 000027A0           2415              LEA     .PLAY,A0
00002706  103C 000F               2416              MOVE.B  #15,D0
0000270A  4EB8 1306               2417              JSR     UTLPRINT
0000270E                          2418  
0000270E                          2419     
0000270E                          2420  ; BUTCOL2__________________________
0000270E                          2421  
0000270E                          2422              ; SET CONTOUR COLOR
0000270E  103C 0050               2423              MOVE.B  #80,D0
00002712  223C 00FFFF00           2424              MOVE.L  #MOTPCOL,D1
00002718  4E4F                    2425              TRAP    #15
0000271A                          2426              
0000271A                          2427              ; SET FILL COLOR
0000271A  103C 0051               2428              MOVE.B  #81,D0
0000271E  2239 000028A2           2429              MOVE.L  (BUTCOL2),D1
00002724  4E4F                    2430              TRAP    #15
00002726                          2431              
00002726                          2432              ; DEFINE COORDINATES
00002726  323C 0140               2433              MOVE.W  #SCRWIDTH/2,D1
0000272A  0441 003E               2434              SUB.W   #BUTWIDTH/2,D1
0000272E  343C 0118               2435              MOVE.W  #BUTPOSY2,D2
00002732  363C 0140               2436              MOVE.W  #SCRWIDTH/2,D3
00002736  0643 003E               2437              ADD.W   #BUTWIDTH/2,D3
0000273A  3802                    2438              MOVE.W  D2,D4
0000273C  0644 0032               2439              ADD.W   #BUTHEIGH,D4
00002740                          2440                        
00002740                          2441              ; DRAW RECTANGLE
00002740  103C 0057               2442              MOVE.B  #87,D0
00002744  4E4F                    2443              TRAP    #15
00002746                          2444              
00002746  41F9 000027A6           2445              LEA     .INST,A0
0000274C  103C 0014               2446              MOVE.B  #20,D0
00002750  4EB8 1306               2447              JSR     UTLPRINT
00002754                          2448  
00002754                          2449  
00002754                          2450  ; BUTCOL3__________________________
00002754                          2451  
00002754                          2452              ; SET CONTOUR COLOR
00002754  103C 0050               2453              MOVE.B  #80,D0
00002758  223C 00FFFF00           2454              MOVE.L  #MOTPCOL,D1
0000275E  4E4F                    2455              TRAP    #15
00002760                          2456              
00002760                          2457              ; SET FILL COLOR
00002760  103C 0051               2458              MOVE.B  #81,D0
00002764  2239 000028A6           2459              MOVE.L  (BUTCOL3),D1
0000276A  4E4F                    2460              TRAP    #15
0000276C                          2461              
0000276C                          2462              ; DEFINE COORDINATES
0000276C  323C 0140               2463              MOVE.W  #SCRWIDTH/2,D1
00002770  0441 003E               2464              SUB.W   #BUTWIDTH/2,D1
00002774  343C 0163               2465              MOVE.W  #BUTPOSY3,D2
00002778  363C 0140               2466              MOVE.W  #SCRWIDTH/2,D3
0000277C  0643 003E               2467              ADD.W   #BUTWIDTH/2,D3
00002780  3802                    2468              MOVE.W  D2,D4
00002782  0644 0032               2469              ADD.W   #BUTHEIGH,D4
00002786                          2470                         
00002786                          2471              ; DRAW RECTANGLE
00002786  103C 0057               2472              MOVE.B  #87,D0
0000278A  4E4F                    2473              TRAP    #15
0000278C                          2474              
0000278C  41F9 000027B3           2475              LEA     .LEAVE,A0
00002792  103C 0019               2476              MOVE.B  #25,D0
00002796  4EB8 1306               2477              JSR     UTLPRINT
0000279A                          2478  
0000279A                          2479  
0000279A                          2480  
0000279A                          2481  
0000279A  4CDF 001F               2482              MOVEM.L (A7)+,D1-D2/D0-D4
0000279E                          2483  
0000279E  4E75                    2484              RTS
000027A0                          2485              
000027A0                          2486              ; WRITE TEXT ON THE BUTTONS
000027A0                          2487              
000027A0= 53 54 41 52 54 00       2488  .PLAY       DC.B    'START',0
000027A6= 49 4E 53 54 52 55 ...   2489  .INST       DC.B    'INSTRUCTIONS',0
000027B3= 45 58 49 54 00          2490  .LEAVE      DC.B    'EXIT',0
000027B8                          2491              DS.W    0
000027B8                          2492  
000027B8                          2493  
000027B8                          2494  -------------------- end include --------------------
000027B8                          2495              INCLUDE "STATES.X68"
000027B8                          2496  ; =============================================================================
000027B8                          2497  ; GAME STATE MANAGEMENT
000027B8                          2498  ; =============================================================================
000027B8                          2499  
000027B8                          2500  ; -----------------------------------------------------------------------------
000027B8                          2501  STAINIT
000027B8                          2502  ; INITALIZES THE STATE MANAGER
000027B8                          2503  ; INPUT    - NONE
000027B8                          2504  ; OUTPUT   - NONE
000027B8                          2505  ; MODIFIES - NONE
000027B8                          2506  ; -----------------------------------------------------------------------------
000027B8  33FC FFFF 000028D4      2507              MOVE.W  #STANONE,(STACUR)
000027C0  4279 000028D6           2508              CLR.W   (STANEXT)
000027C6  4E75                    2509              RTS
000027C8                          2510  
000027C8                          2511  ; -----------------------------------------------------------------------------
000027C8                          2512  STAUPD
000027C8                          2513  ; PERFORMS STATE UPDATE AND INIT IF NECESSARY
000027C8                          2514  ; INPUT    - NONE
000027C8                          2515  ; OUTPUT   - NONE
000027C8                          2516  ; MODIFIES - NONE
000027C8                          2517  ; -----------------------------------------------------------------------------
000027C8  48E7 8080               2518              MOVEM.L D0/A0,-(A7)
000027CC  4280                    2519              CLR.L   D0
000027CE  3039 000028D6           2520              MOVE.W  (STANEXT),D0
000027D4  B079 000028D4           2521              CMP.W   (STACUR),D0
000027DA  6700 0012               2522              BEQ     .DOUPD
000027DE  33C0 000028D4           2523              MOVE.W  D0,(STACUR)             ; IF STATE CHANGED, DO INIT
000027E4  E588                    2524              LSL.L   #2,D0
000027E6  2040                    2525              MOVE.L  D0,A0
000027E8  2068 2806               2526              MOVE.L  .INITBL(A0),A0
000027EC  4E90                    2527              JSR     (A0)
000027EE  4280                    2528  .DOUPD      CLR.L   D0                      ; IN ANY CASE, DO UPDATE
000027F0  3039 000028D4           2529              MOVE.W  (STACUR),D0
000027F6  E588                    2530              LSL.L   #2,D0
000027F8  2040                    2531              MOVE.L  D0,A0
000027FA  2068 281A               2532              MOVE.L  .UPDTBL(A0),A0
000027FE  4E90                    2533              JSR     (A0)
00002800  4CDF 0101               2534              MOVEM.L (A7)+,D0/A0
00002804  4E75                    2535              RTS
00002806= 0000210C 00002184 ...   2536  .INITBL     DC.L    ISCINIT,INSINIT,GAMINIT,STAEMPTY,STAEMPTY
0000281A= 0000211A 00002186 ...   2537  .UPDTBL     DC.L    ISCUPD,INSUPD,GAMUPD,WINUPD,GOVUPD
0000282E                          2538  
0000282E                          2539  ; -----------------------------------------------------------------------------
0000282E                          2540  STAPLOT
0000282E                          2541  ; PERFORMS STATE PLOT
0000282E                          2542  ; INPUT    - NONE
0000282E                          2543  ; OUTPUT   - NONE
0000282E                          2544  ; MODIFIES - NONE
0000282E                          2545  ; -----------------------------------------------------------------------------
0000282E  48E7 8080               2546              MOVEM.L D0/A0,-(A7)
00002832  4280                    2547              CLR.L   D0
00002834  3039 000028D4           2548              MOVE.W  (STACUR),D0
0000283A  E588                    2549              LSL.L   #2,D0
0000283C  2040                    2550              MOVE.L  D0,A0
0000283E  2068 284A               2551              MOVE.L  .PLTTBL(A0),A0
00002842  4E90                    2552              JSR     (A0)
00002844  4CDF 0101               2553              MOVEM.L (A7)+,D0/A0
00002848  4E75                    2554              RTS
0000284A= 00002150 000021B6 ...   2555  .PLTTBL     DC.L    ISCPLOT,INSPLOT,GAMPLOT,WINPLOT,GOVPLOT
0000285E                          2556  
0000285E                          2557  ; -----------------------------------------------------------------------------
0000285E                          2558  STAEMPTY
0000285E                          2559  ; EMPTY SUBROUTINE FOR CASES WITH NOTHING TO DO
0000285E                          2560  ; INPUT    - NONE
0000285E                          2561  ; OUTPUT   - NONE
0000285E                          2562  ; MODIFIES - NONE
0000285E                          2563  ; NOTE     - JUST A PLACEHOLDER. NOTHING TO DO.
0000285E                          2564  ; -----------------------------------------------------------------------------
0000285E  4E75                    2565              RTS
0000285E  4E75                    2566  -------------------- end include --------------------
00002860                          2567             
00002860                          2568  START
00002860                          2569  
00002860                          2570  ; --- INITIALIZATION -----------------------------------------------------------
00002860                          2571  
00002860  007C 0700               2572              ORI.W   #$0700,SR
00002864  4EB8 10C2               2573              JSR     SYSINIT
00002868  4EB8 12F0               2574              JSR     UTLINIT
0000286C  4EB8 24D4               2575              JSR     MOINIT
00002870  4EB8 27B8               2576              JSR     STAINIT
00002874                          2577              
00002874                          2578  
00002874                          2579  .LOOP
00002874                          2580  
00002874                          2581  ; --- UPDATE -------------------------------------------------------------------
00002874                          2582  
00002874                          2583  ; READ INPUT DEVICES
00002874  4E41                    2584              TRAP    #KBDUPTN
00002876  4EB8 24F6               2585              JSR     MOINTE
0000287A  4EB8 2536               2586              JSR     MOMOVE
0000287E                          2587              
0000287E                          2588  
0000287E                          2589  
0000287E                          2590  ; UPDATE GAME LOGIC
0000287E                          2591  
0000287E  4EB8 27C8               2592              JSR     STAUPD
00002882                          2593  
00002882                          2594  ; --- SYNC ---------------------------------------------------------------------
00002882                          2595  
00002882  4A39 000028EA           2596  .WINT       TST.B   (SCRINTCT)
00002888  67F8                    2597              BEQ     .WINT
0000288A  4239 000028EA           2598              CLR.B   (SCRINTCT)
00002890                          2599  
00002890                          2600  ; --- PLOT ---------------------------------------------------------------------
00002890                          2601              
00002890  4EB8 282E               2602              JSR     STAPLOT
00002894  4E40                    2603              TRAP    #SCRUPTN                ; UPDATE DOUBLE BUFFER
00002896                          2604  
00002896  60DC                    2605              BRA     .LOOP
00002898                          2606              
00002898  FFFF FFFF               2607              SIMHALT
0000289C                          2608              
0000289C                          2609              INCLUDE "VARS.X68"
0000289C                          2610  ; ==============================================================================
0000289C                          2611  ; GAME VARIABLES
0000289C                          2612  ; ==============================================================================
0000289C                          2613  
0000289C                          2614  ; --- BUTTON RELATED VARIABLES -------------------------------------------------
0000289C                          2615  TOUCHED     DS.W    1
0000289E= 00000000                2616  BUTCOL1     DC.L    0
000028A2= 00000000                2617  BUTCOL2     DC.L    0
000028A6= 00000000                2618  BUTCOL3     DC.L    0
000028AA                          2619  
000028AA                          2620  ; --- SHOOT RELATED VARIABLES --------------------------------------------------
000028AA                          2621  SHOTPOSX     DS.W    1                       ; SHOOT X COORDINATE
000028AC                          2622  SHOTPOSY     DS.W    1                       ; SHOOT Y COORDINATE
000028AE                          2623  SHOTVELY     DS.W    1                       ; SHOOT Y VELOCITY
000028B0= 000A                    2624  SHOTIMER     DC.W    10                      ; SHOOT TIMER
000028B2                          2625  
000028B2                          2626  ; --- MARCIANOS RELATED VARIABLES-----------------------------------------------
000028B2                          2627  MARPOSX     DS.W    1                       ; MARCIANOS X COORDINATE
000028B4                          2628  MARPOSY     DS.W    1                       ; MARCIANOS Y COORDINATE
000028B6= 0001                    2629  MARSPEDX    DC.W    1                       ; MARCIANOS VELOCITY
000028B8= 004F                    2630  SUMMAR      DC.W    $4F                     ; DISTANCE BETWEEN MARCIANOS 
000028BA= 0007                    2631  NUMMAR      DC.W    7                       ; MARCIANOS IN A ROW (0-7)
000028BC= 0000                    2632  MAXMAR      DC.W    0                       ; MARCIANOS MAXIMUM NUMBER
000028BE= 0000                    2633  MARTIMER    DC.W    0                       ; MARCIANOS TIME BETWEEN Y MOVEMENTS
000028C0= 0000                    2634  BORDCOLL    DC.W    0                       ; MARCIANOS SCREEN BORDER COLLISION
000028C2= 00A0                    2635  ROWTIMER    DC.W    $A0                     ; TIME BETWEEN ROW GENERATIONS
000028C4= 0000                    2636  RDMCOUNT    DC.W    0                       ; MARCIANOS RANDOM COUNTER
000028C6                          2637  
000028C6                          2638  ; --- SHOOTMAR MARCIANO RELATED VARIABLES---------------------------------------
000028C6= 0000                    2639  MAXSHTMA    DC.W    0
000028C8                          2640  
000028C8                          2641  ; --- SHIP RELATED VARIABLES ---------------------------------------------------
000028C8                          2642  SHIPPOSY    DS.W    1                       ; SHIP Y COORDINATE
000028CA                          2643  SHIPPOSX    DS.W    1                       ; SHIP X COORDINATE
000028CC= 0000                    2644  SHIPVEL     DC.W    0                       ; SHIP VELOCITY
000028CE= 0000                    2645  LENGLIFE    DC.W    0                       ; SHIP'S LIFE BAR LENGTH
000028D0= 0003                    2646  LIFES       DC.W    3                       ; NUMBER OF INITIAL LIFES
000028D2                          2647  
000028D2                          2648  ; --- SCOREBOARD RELATED VARIABLES ---------------------------------------------
000028D2                          2649  SCOOUT      DS.W    1                       ; SCORE (50*MARCIANOS KILLED)
000028D4                          2650  
000028D4                          2651  ; --- STATE RELATED VARIABLES --------------------------------------------------
000028D4                          2652  STACUR      DS.W    1                       ; CURRENT STATE
000028D6                          2653  STANEXT     DS.W    1                       ; NEXT STATE
000028D8                          2654  
000028D8                          2655  ;--- MOUSE REALTED VARIABLES ---------------------------------------------------
000028D8                          2656  BUTTON_R    DS.W    1                       ; MOUSE RIGHT BUTTON
000028DA                          2657  BUTTON_L    DS.W    1                       ; MOUSE LEFT BUTTON
000028DC                          2658  MOUSEX      DS.W    1                       ; MOUSE X COORDINATE
000028DE                          2659  MOUSEY      DS.W    1                       ; MOUSE Y COORDINATE
000028E0                          2660  
000028E0                          2661  
000028E0                          2662  -------------------- end include --------------------
000028E0                          2663              INCLUDE "LIB/UTLVARS.X68"
000028E0                          2664  ; =============================================================================
000028E0                          2665  ; UTILITY VARIABLES
000028E0                          2666  ; =============================================================================
000028E0                          2667  
000028E0                          2668  UTLRNDIX    DS.B    1                       ; NEXT INDEX TO RANDOM NUMBER
000028E2                          2669              DS.W    0
000028E2                          2670  -------------------- end include --------------------
000028E2                          2671              INCLUDE "SYSVARS.X68"
000028E2                          2672  ; ==============================================================================
000028E2                          2673  ; SYSTEM VARIABLES
000028E2                          2674  ; ==============================================================================
000028E2                          2675              
000028E2                          2676  ; --- KEYBOARD RELATED VARIABLES -----------------------------------------------
000028E2                          2677  
000028E2                          2678  KBDVAL      DS.B    1                       ; KEY STATE
000028E3                          2679  KBDEDGE     DS.B    1                       ; KEY EDGE
000028E4= 0000                    2680  FPS         DC.W    0                       ; FRAMES PER SECOND
000028E6= 0000                    2681  FRAMES      DC.W    0
000028E8                          2682  
000028E8                          2683  ; --- INTRO STATE RELATED VARIABLES --------------------------------------------
000028E8                          2684  
000028E8                          2685  ISCTIMER    DS.W    1                       ; INTRO TIMER
000028EA                          2686  
000028EA                          2687  ; --- TIMED INTERRUPT RELATED VARIABLES ----------------------------------------
000028EA                          2688  
000028EA                          2689  SCRINTCT    DS.B    1                       ; INTERRUPT COUNTER
000028EC                          2690              DS.W    0
000028EC                          2691  SCRINTCY    DS.B    1
000028EE                          2692              DS.W    0
000028EE                          2693  
000028EE                          2694  -------------------- end include --------------------
000028EE                          2695              INCLUDE "LIB/DMMVARS.X68"
000028EE                          2696  ; =============================================================================
000028EE                          2697  ; DYNAMIC MEMORY MANAGEMENT VARIABLES (SYSTEM VARIABLES)
000028EE                          2698  ; =============================================================================
000028EE                          2699  
00002900                          2700              ORG     (*+DMMBSIZE-1)&-DMMBSIZE ; ALIGN TO DMMBSIZE
00002900                          2701  DMMDATA     DS.B    DMMBSIZE*DMMBNUM        ; DYNAMIC MEMORY ALLOCATION SPACE
00003580                          2702              DS.W    0                       ; JUST IN CASE (SIZE IS POW OF TWO)
00003580                          2703  -------------------- end include --------------------
00003580                          2704  
00003580                          2705              END     START

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
AGLADD              128C
AGLADD:END          12A2
AGLKILL             10AC
AGLPLOT             12CA
AGLPLOT:END         12EA
AGLPLOT:LOOP        12D2
AGLUPD              12A6
AGLUPD:END          12C4
AGLUPD:LOOP         12AE
BORDCOLL            28C0
BUTCOL1             289E
BUTCOL2             28A2
BUTCOL3             28A6
BUTHEIGH            32
BUTINIT             2556
BUTPLOT             26C4
BUTPLOT:INST        27A6
BUTPLOT:LEAVE       27B3
BUTPLOT:PLAY        27A0
BUTPOSY1            CD
BUTPOSY2            118
BUTPOSY3            163
BUTTON_L            28DA
BUTTON_R            28D8
BUTUPD              257E
BUTUPD:CHKBUT2      25FA
BUTUPD:CHKBUT3      264E
BUTUPD:EXIT         26BE
BUTUPD:RESTORE      26A0
BUTWIDTH            7D
DMMALLOC            1092
DMMALLOC:END        10AA
DMMBNUM             32
DMMBSIZE            40
DMMDATA             2900
DMMFCOM             106C
DMMFFND             107A
DMMFIRST            1022
DMMFLOOP            1060
DMMFRCOM            1034
DMMFREE             10AC
DMMFRFND            1042
DMMFRLOP            1028
DMMFRSTO            105A
DMMINIT             1000
DMMINIT:LOOP        100E
DMMNEXT             1044
DMMNEXTO            107C
DMMSYSID            0
FPS                 28E4
FPSINTNM            2
FPSISR              11F0
FRAMES              28E6
GAMINIT             2018
GAMPLOT             2100
GAMUPD              2024
GAMUPD:CONTINU      20C4
GAMUPD:DONE         20FA
GAMUPD:GENLOOP      2084
GAMUPD:GOUPD        2060
GCIRFCOL            80
GCIRPCOL            80
GOVPLOT             245A
GOVPLOT:DONE        249C
GOVPLOT:TXT1        24A2
GOVPLOT:TXT2        24AC
GOVPLOT:TXT3        24BD
GOVUPD              2446
GOVUPD:CONT         2458
GRECFCOL            80FFFF
GRECPCOL            80FFFF
GUIDEINT            1AAE
GUIDEIPD            1AC6
GUIDEIPD:DONE       1B5C
GUIDEIPD:FALLGUIDE  1B0E
GUIDEIPD:GUIDEX     1B1A
GUIDEIPD:RTGUIDE    1B54
GUIDEPLT            1B62
GUIHEIGH            30
GUISPEED            2
GUIWIDTH            30
INSINIT             2184
INSMAXTM            3E8
INSPLOT             21B6
INSPLOT:DONE        21EC
INSPLOT:LOOP        21C4
INSPLOT:PARP        21D2
INSPLOT:TXT1        21F2
INSPLOT:TXT10       2347
INSPLOT:TXT11       2362
INSPLOT:TXT12       2393
INSPLOT:TXT2        2210
INSPLOT:TXT3        224F
INSPLOT:TXT4        227F
INSPLOT:TXT5        229A
INSPLOT:TXT6        22CE
INSPLOT:TXT7        22D2
INSPLOT:TXT8        22FE
INSPLOT:TXT9        2319
INSPLOT:TXTLST      23A6
INSUPD              2186
INSUPD:CONT         219A
INSUPD:DONE         21B4
ISCINIT             210C
ISCMAXTM            1F4
ISCPLOT             2150
ISCPLOT:TXT1        2176
ISCTIMER            28E8
ISCUPD              211A
ISCUPD:CONT         2134
ISCUPD:DONE         214E
KBDDOWN             28
KBDEDGE             28E3
KBDFIRE1            58
KBDFIRE2            20
KBDFIRE3            10
KBDINIT             1230
KBDLEFT             25
KBDPAUSE            50
KBDRIGHT            27
KBDUP               26
KBDUPD              123E
KBDUPD:LOOP         1282
KBDUPD:PACK         127E
KBDUPTN             1
KBDVAL              28E2
LENGLIFE            28CE
LIFES               28D0
MARHEIGH            2E
MARINIT             1C1A
MARPLOT             1DC0
MARPOSX             28B2
MARPOSY             28B4
MARSPEDX            28B6
MARSPEDY            1
MARTIMER            28BE
MARUPD              1C3C
MARUPD:CHKCOLL      1D66
MARUPD:CHKLEFT      1D52
MARUPD:CHKRN        1C72
MARUPD:DONE         1DB2
MARUPD:END          1DB8
MARUPD:LOOP         1D6E
MARUPD:MOVEMENTY    1D22
MARUPD:NEXT         1DAC
MARUPD:NEXTRDM      1CFA
MARUPD:NOMOVEY      1D3A
MARUPD:NOSHOT       1CDE
MARUPD:NOTGUIDE     1CA2
MARWIDTH            2E
MAXMAR              28BC
MAXSHTMA            28C6
MCIRFCOL            AA
MCIRPCOL            1111FF
MOINIT              24D4
MOINTE              24F6
MOMOVE              2536
MOTFCOL             FFFF00
MOTPCOL             FFFF00
MOUSEX              28DC
MOUSEY              28DE
MRECFCOL            800080
MRECPCOL            800080
NOT_LEFT            2522
NOT_RIGHT           2530
NUCFCOL             FF0000
NUCPCOL             FF0000
NUMMAR              28BA
POINTS              32
RANDVEC             1E78
RDMCOUNT            28C4
ROWTIMER            28C2
SCOFCOL             0
SCOINIT             1F78
SCOLINE1            4201
SCOLINE2            4202
SCOLINE3            101
SCOOUT              28D2
SCOPLOT             1F86
SCOPLOT:TXT1        1FF0
SCOPLOT:TXT2        1FFD
SCOPLOT:TXT3        200A
SCRFPS              32
SCRHEIGH            280
SCRINIT             1170
SCRINTCT            28EA
SCRINTCY            28EC
SCRINTN             1
SCRPLOT             11D6
SCRTIM              120A
SCRUPTN             0
SCRWIDTH            280
SHIPFCOL            AA00
SHIPHEIG            40
SHIPINIT            1456
SHIPPCOL            FF00
SHIPPLOT            16AC
SHIPPLOT:DEAD       17CE
SHIPPOSX            28CA
SHIPPOSY            28C8
SHIPSPED            A
SHIPUPD             1468
SHIPUPD:CHKDWN      1482
SHIPUPD:CHKHORZ     151C
SHIPUPD:CHKLEFT     1492
SHIPUPD:CHKMARGD    168E
SHIPUPD:CHKMOT      158E
SHIPUPD:CHKMOTRI    1602
SHIPUPD:CHKRIGH     14A8
SHIPUPD:CONT        14BC
SHIPUPD:CONT2       14CC
SHIPUPD:CONT3       14DC
SHIPUPD:CONT4       14EC
SHIPUPD:DONE        14FC
SHIPUPD:EXIT        16A6
SHIPUPD:GUIDELOOP   1696
SHIPUPD:LOOP        1510
SHIPUPD:NEXT        167E
SHIPVEL             28CC
SHIPWIDT            10
SHOTFCOL            FF000000
SHOTIMER            28B0
SHOTINIT            195A
SHOTPCOL            AA000000
SHOTPLOT            1A70
SHOTPOSX            28AA
SHOTPOSY            28AC
SHOTRAD             8
SHOTSPED            F
SHOTUPD             1984
SHOTUPD:CHKGUIDE    1A34
SHOTUPD:COLBOT      1A50
SHOTUPD:COLTOP      1A5E
SHOTUPD:DONE        1A66
SHOTUPD:GUIDELOOP   1A3C
SHOTUPD:LOOP        19AC
SHOTUPD:MAREJX0     19E4
SHOTUPD:MAREJX1     19F8
SHOTUPD:MAREJY0     19BC
SHOTUPD:MAREJY1     19D2
SHOTUPD:NEXT        1A24
SHOTVELY            28AE
SHOTWAIT            10
SHTMAHEI            A
SHTMAINT            17DA
SHTMAPLT            191C
SHTMAUPD            17FA
SHTMAUPD:CHKMOT     184E
SHTMAUPD:CHKMOTRI   1898
SHTMAUPD:CHKVECO    18FC
SHTMAUPD:DESTROY    18DE
SHTMAUPD:DONE       1912
SHTMAWIT            5
SNDINIT             1100
SNDINIT:DONE        111E
SNDINIT:LOOP        110C
SNDINIT:SNDHIT      1133
SNDINIT:SNDLIST     114E
SNDINIT:SNDSHOT     113F
SNDINIT:SNDWALL     1124
SNDPLAY             115E
SNDPLTN             2
STACUR              28D4
STAEMPTY            285E
STAINIT             27B8
STANEXT             28D6
STANONE             FFFFFFFF
STAPLOT             282E
STAPLOT:PLTTBL      284A
START               2860
START:LOOP          2874
START:WINT          2882
STAUPD              27C8
STAUPD:DOUPD        27EE
STAUPD:INITBL       2806
STAUPD:UPDTBL       281A
SUMMAR              28B8
SYSINIT             10C2
TOUCHED             289C
UTLCHRWD            8
UTLINIT             12F0
UTLPRINT            1306
UTLPRINT:ENDLOOP    1318
UTLPRINT:LOOP       130E
UTLRAND             1338
UTLRAND:RANDVEC     1356
UTLRNDIX            28E0
WINPLOT             23EA
WINPLOT:DONE        241E
WINPLOT:TXT1        2424
WINPLOT:TXT2        242D
WINUPD              23D6
WINUPD:CONT         23E8
